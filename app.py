from flask import Flask, flash, request, redirect, render_template, session, g
from models import connect_db, db, Users, Chat
from forms import UserForm, ChatForm, LoginForm
from methods import user, make_user_profile, all_footballers, user_personal_info, starting_vi
from jersey_selection import jersey_list

app = Flask(__name__)

app.config['SQLALCHEMY_DATABASE_URI'] = 'postgresql:///cap_db'
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False
app.config['SQLALCHEMY_ECHO'] = True
app.config['SECRET_KEY'] = 'crowBottom'

connect_db(app)

@app.route('/')
def home_route():
    return render_template('home.html')

# register a new user
@app.route('/register', methods=['GET', 'POST'])
def register_user():
    form = UserForm()

    if form.validate_on_submit():
        email = form.email.data
        password = form.password.data
        team_id = form.team_id.data

        #make the GET requests before password is hashed
        player = user
        make_user_profile(email, password, team_id)

        new_user = Users.register(email, password, team_id)
        new_user.team_name = user['team_name']
        new_user.overall_points = user['overall_points']
        new_user.gameweek_points = user['gameweek_points']
        new_user.classic_league_name = user['classic_league_name']
        new_user.classic_league_rank = user['classic_league_rank']
        new_user.classic_league_rank_previous = user['classic_league_rank_previous']

        # player 1
        new_user.p1_chance_of_playing_next_round = user['players'][0]['chance_of_playing_next_round']
        new_user.p1_chance_of_playing_this_round = user['players'][0]['chance_of_playing_this_round']
        new_user.p1_code = user['players'][0]['code']
        new_user.p1_cost_change_event = user['players'][0]['cost_change_event']
        new_user.p1_cost_change_event_fall = user['players'][0]['cost_change_event_fall']
        new_user.p1_cost_change_start = user['players'][0]['cost_change_start']
        new_user.p1_cost_change_start_fall = user['players'][0]['cost_change_start_fall']
        new_user.p1_dreamteam_count = user['players'][0]['dreamteam_count']
        new_user.p1_element_type = user['players'][0]['element_type']
        new_user.p1_ep_next = user['players'][0]['ep_next']
        new_user.p1_ep_this = user['players'][0]['ep_this']
        new_user.p1_event_points = user['players'][0]['event_points']
        new_user.p1_first_name = user['players'][0]['first_name']
        new_user.p1_form = user['players'][0]['form']
        new_user.p1_player_id = user['players'][0]['id']
        new_user.p1_in_dreamteam = user['players'][0]['in_dreamteam']
        new_user.p1_news = user['players'][0]['news']
        new_user.p1_news_added = user['players'][0]['news_added']
        new_user.p1_now_cost = user['players'][0]['now_cost']
        new_user.p1_photo = user['players'][0]['photo']
        new_user.p1_points_per_game = user['players'][0]['points_per_game']
        new_user.p1_second_name = user['players'][0]['second_name']
        new_user.p1_selected_by_percent = user['players'][0]['selected_by_percent']
        new_user.p1_special = user['players'][0]['special']
        new_user.p1_squad_number = user['players'][0]['squad_number']
        new_user.p1_status = user['players'][0]['status']
        new_user.p1_team = user['players'][0]['team']
        new_user.p1_team_code = user['players'][0]['team_code']
        new_user.p1_total_points = user['players'][0]['total_points']
        new_user.p1_transfers_in = user['players'][0]['transfers_in']
        new_user.p1_transfers_in_event = user['players'][0]['transfers_in_event']
        new_user.p1_transfers_out = user['players'][0]['transfers_out']
        new_user.p1_transfers_out_event = user['players'][0]['transfers_out_event']
        new_user.p1_value_form = user['players'][0]['value_form']
        new_user.p1_value_season = user['players'][0]['value_season']
        new_user.p1_web_name = user['players'][0]['web_name']
        new_user.p1_minutes = user['players'][0]['minutes']
        new_user.p1_goals_scored = user['players'][0]['goals_scored']
        new_user.p1_assists = user['players'][0]['assists']
        new_user.p1_clean_sheets = user['players'][0]['clean_sheets']
        new_user.p1_own_goals = user['players'][0]['own_goals']
        new_user.p1_penalties_saved = user['players'][0]['penalties_saved']
        new_user.p1_yellow_cards = user['players'][0]['yellow_cards']
        new_user.p1_red_cards = user['players'][0]['red_cards']
        new_user.p1_saves = user['players'][0]['saves']
        new_user.p1_bonus = user['players'][0]['bonus']
        new_user.p1_bps = user['players'][0]['bps']
        new_user.p1_influence = user['players'][0]['influence']
        new_user.p1_creativity = user['players'][0]['creativity']
        new_user.p1_threat = user['players'][0]['threat']
        new_user.p1_ict_index = user['players'][0]['ict_index']
        new_user.p1_influence_rank = user['players'][0]['influence_rank']
        new_user.p1_influence_rank_type = user['players'][0]['influence_rank_type']
        new_user.p1_creativity_rank = user['players'][0]['creativity_rank']
        new_user.p1_creativity_rank_type = user['players'][0]['creativity_rank_type']
        new_user.p1_threat_rank = user['players'][0]['threat_rank']
        new_user.p1_threat_rank_type = user['players'][0]['threat_rank_type']
        # player 2
        new_user.p2_chance_of_playing_next_round = user['players'][1]['chance_of_playing_next_round']
        new_user.p2_chance_of_playing_this_round = user['players'][1]['chance_of_playing_this_round']
        new_user.p2_code = user['players'][1]['code']
        new_user.p2_cost_change_event = user['players'][1]['cost_change_event']
        new_user.p2_cost_change_event_fall = user['players'][1]['cost_change_event_fall']
        new_user.p2_cost_change_start = user['players'][1]['cost_change_start']
        new_user.p2_cost_change_start_fall = user['players'][1]['cost_change_start_fall']
        new_user.p2_dreamteam_count = user['players'][1]['dreamteam_count']
        new_user.p2_element_type = user['players'][1]['element_type']
        new_user.p2_ep_next = user['players'][1]['ep_next']
        new_user.p2_ep_this = user['players'][1]['ep_this']
        new_user.p2_event_points = user['players'][1]['event_points']
        new_user.p2_first_name = user['players'][1]['first_name']
        new_user.p2_form = user['players'][1]['form']
        new_user.p2_player_id = user['players'][1]['id']
        new_user.p2_in_dreamteam = user['players'][1]['in_dreamteam']
        new_user.p2_news = user['players'][1]['news']
        new_user.p2_news_added = user['players'][1]['news_added']
        new_user.p2_now_cost = user['players'][1]['now_cost']
        new_user.p2_photo = user['players'][1]['photo']
        new_user.p2_points_per_game = user['players'][1]['points_per_game']
        new_user.p2_second_name = user['players'][1]['second_name']
        new_user.p2_selected_by_percent = user['players'][1]['selected_by_percent']
        new_user.p2_special = user['players'][1]['special']
        new_user.p2_squad_number = user['players'][1]['squad_number']
        new_user.p2_status = user['players'][1]['status']
        new_user.p2_team = user['players'][1]['team']
        new_user.p2_team_code = user['players'][1]['team_code']
        new_user.p2_total_points = user['players'][1]['total_points']
        new_user.p2_transfers_in = user['players'][1]['transfers_in']
        new_user.p2_transfers_in_event = user['players'][1]['transfers_in_event']
        new_user.p2_transfers_out = user['players'][1]['transfers_out']
        new_user.p2_transfers_out_event = user['players'][1]['transfers_out_event']
        new_user.p2_value_form = user['players'][1]['value_form']
        new_user.p2_value_season = user['players'][1]['value_season']
        new_user.p2_web_name = user['players'][1]['web_name']
        new_user.p2_minutes = user['players'][1]['minutes']
        new_user.p2_goals_scored = user['players'][1]['goals_scored']
        new_user.p2_assists = user['players'][1]['assists']
        new_user.p2_clean_sheets = user['players'][1]['clean_sheets']
        new_user.p2_own_goals = user['players'][1]['own_goals']
        new_user.p2_penalties_saved = user['players'][1]['penalties_saved']
        new_user.p2_yellow_cards = user['players'][1]['yellow_cards']
        new_user.p2_red_cards = user['players'][1]['red_cards']
        new_user.p2_saves = user['players'][1]['saves']
        new_user.p2_bonus = user['players'][1]['bonus']
        new_user.p2_bps = user['players'][1]['bps']
        new_user.p2_influence = user['players'][1]['influence']
        new_user.p2_creativity = user['players'][1]['creativity']
        new_user.p2_threat = user['players'][1]['threat']
        new_user.p2_ict_index = user['players'][1]['ict_index']
        new_user.p2_influence_rank = user['players'][1]['influence_rank']
        new_user.p2_influence_rank_type = user['players'][1]['influence_rank_type']
        new_user.p2_creativity_rank = user['players'][1]['creativity_rank']
        new_user.p2_creativity_rank_type = user['players'][1]['creativity_rank_type']
        new_user.p2_threat_rank = user['players'][1]['threat_rank']
        new_user.p2_threat_rank_type = user['players'][1]['threat_rank_type']
        # player 3
        new_user.p3_chance_of_playing_next_round = user['players'][2]['chance_of_playing_next_round']
        new_user.p3_chance_of_playing_this_round = user['players'][2]['chance_of_playing_this_round']
        new_user.p3_code = user['players'][2]['code']
        new_user.p3_cost_change_event = user['players'][2]['cost_change_event']
        new_user.p3_cost_change_event_fall = user['players'][2]['cost_change_event_fall']
        new_user.p3_cost_change_start = user['players'][2]['cost_change_start']
        new_user.p3_cost_change_start_fall = user['players'][2]['cost_change_start_fall']
        new_user.p3_dreamteam_count = user['players'][2]['dreamteam_count']
        new_user.p3_element_type = user['players'][2]['element_type']
        new_user.p3_ep_next = user['players'][2]['ep_next']
        new_user.p3_ep_this = user['players'][2]['ep_this']
        new_user.p3_event_points = user['players'][2]['event_points']
        new_user.p3_first_name = user['players'][2]['first_name']
        new_user.p3_form = user['players'][2]['form']
        new_user.p3_player_id = user['players'][2]['id']
        new_user.p3_in_dreamteam = user['players'][2]['in_dreamteam']
        new_user.p3_news = user['players'][2]['news']
        new_user.p3_news_added = user['players'][2]['news_added']
        new_user.p3_now_cost = user['players'][2]['now_cost']
        new_user.p3_photo = user['players'][2]['photo']
        new_user.p3_points_per_game = user['players'][2]['points_per_game']
        new_user.p3_second_name = user['players'][2]['second_name']
        new_user.p3_selected_by_percent = user['players'][2]['selected_by_percent']
        new_user.p3_special = user['players'][2]['special']
        new_user.p3_squad_number = user['players'][2]['squad_number']
        new_user.p3_status = user['players'][2]['status']
        new_user.p3_team = user['players'][2]['team']
        new_user.p3_team_code = user['players'][2]['team_code']
        new_user.p3_total_points = user['players'][2]['total_points']
        new_user.p3_transfers_in = user['players'][2]['transfers_in']
        new_user.p3_transfers_in_event = user['players'][2]['transfers_in_event']
        new_user.p3_transfers_out = user['players'][2]['transfers_out']
        new_user.p3_transfers_out_event = user['players'][2]['transfers_out_event']
        new_user.p3_value_form = user['players'][2]['value_form']
        new_user.p3_value_season = user['players'][2]['value_season']
        new_user.p3_web_name = user['players'][2]['web_name']
        new_user.p3_minutes = user['players'][2]['minutes']
        new_user.p3_goals_scored = user['players'][2]['goals_scored']
        new_user.p3_assists = user['players'][2]['assists']
        new_user.p3_clean_sheets = user['players'][2]['clean_sheets']
        new_user.p3_own_goals = user['players'][2]['own_goals']
        new_user.p3_penalties_saved = user['players'][2]['penalties_saved']
        new_user.p3_yellow_cards = user['players'][2]['yellow_cards']
        new_user.p3_red_cards = user['players'][2]['red_cards']
        new_user.p3_saves = user['players'][2]['saves']
        new_user.p3_bonus = user['players'][2]['bonus']
        new_user.p3_bps = user['players'][2]['bps']
        new_user.p3_influence = user['players'][2]['influence']
        new_user.p3_creativity = user['players'][2]['creativity']
        new_user.p3_threat = user['players'][2]['threat']
        new_user.p3_ict_index = user['players'][2]['ict_index']
        new_user.p3_influence_rank = user['players'][2]['influence_rank']
        new_user.p3_influence_rank_type = user['players'][2]['influence_rank_type']
        new_user.p3_creativity_rank = user['players'][2]['creativity_rank']
        new_user.p3_creativity_rank_type = user['players'][2]['creativity_rank_type']
        new_user.p3_threat_rank = user['players'][2]['threat_rank']
        new_user.p3_threat_rank_type = user['players'][2]['threat_rank_type']

        # player 4
        new_user.p4_chance_of_playing_next_round = user['players'][3]['chance_of_playing_next_round']
        new_user.p4_chance_of_playing_this_round = user['players'][3]['chance_of_playing_this_round']
        new_user.p4_code = user['players'][3]['code']
        new_user.p4_cost_change_event = user['players'][3]['cost_change_event']
        new_user.p4_cost_change_event_fall = user['players'][3]['cost_change_event_fall']
        new_user.p4_cost_change_start = user['players'][3]['cost_change_start']
        new_user.p4_cost_change_start_fall = user['players'][3]['cost_change_start_fall']
        new_user.p4_dreamteam_count = user['players'][3]['dreamteam_count']
        new_user.p4_element_type = user['players'][3]['element_type']
        new_user.p4_ep_next = user['players'][3]['ep_next']
        new_user.p4_ep_this = user['players'][3]['ep_this']
        new_user.p4_event_points = user['players'][3]['event_points']
        new_user.p4_first_name = user['players'][3]['first_name']
        new_user.p4_form = user['players'][3]['form']
        new_user.p4_player_id = user['players'][3]['id']
        new_user.p4_in_dreamteam = user['players'][3]['in_dreamteam']
        new_user.p4_news = user['players'][3]['news']
        new_user.p4_news_added = user['players'][3]['news_added']
        new_user.p4_now_cost = user['players'][3]['now_cost']
        new_user.p4_photo = user['players'][3]['photo']
        new_user.p4_points_per_game = user['players'][3]['points_per_game']
        new_user.p4_second_name = user['players'][3]['second_name']
        new_user.p4_selected_by_percent = user['players'][3]['selected_by_percent']
        new_user.p4_special = user['players'][3]['special']
        new_user.p4_squad_number = user['players'][3]['squad_number']
        new_user.p4_status = user['players'][3]['status']
        new_user.p4_team = user['players'][3]['team']
        new_user.p4_team_code = user['players'][3]['team_code']
        new_user.p4_total_points = user['players'][3]['total_points']
        new_user.p4_transfers_in = user['players'][3]['transfers_in']
        new_user.p4_transfers_in_event = user['players'][3]['transfers_in_event']
        new_user.p4_transfers_out = user['players'][3]['transfers_out']
        new_user.p4_transfers_out_event = user['players'][3]['transfers_out_event']
        new_user.p4_value_form = user['players'][3]['value_form']
        new_user.p4_value_season = user['players'][3]['value_season']
        new_user.p4_web_name = user['players'][3]['web_name']
        new_user.p4_minutes = user['players'][3]['minutes']
        new_user.p4_goals_scored = user['players'][3]['goals_scored']
        new_user.p4_assists = user['players'][3]['assists']
        new_user.p4_clean_sheets = user['players'][3]['clean_sheets']
        new_user.p4_own_goals = user['players'][3]['own_goals']
        new_user.p4_penalties_saved = user['players'][3]['penalties_saved']
        new_user.p4_yellow_cards = user['players'][3]['yellow_cards']
        new_user.p4_red_cards = user['players'][3]['red_cards']
        new_user.p4_saves = user['players'][3]['saves']
        new_user.p4_bonus = user['players'][3]['bonus']
        new_user.p4_bps = user['players'][3]['bps']
        new_user.p4_influence = user['players'][3]['influence']
        new_user.p4_creativity = user['players'][3]['creativity']
        new_user.p4_threat = user['players'][3]['threat']
        new_user.p4_ict_index = user['players'][3]['ict_index']
        new_user.p4_influence_rank = user['players'][3]['influence_rank']
        new_user.p4_influence_rank_type = user['players'][3]['influence_rank_type']
        new_user.p4_creativity_rank = user['players'][3]['creativity_rank']
        new_user.p4_creativity_rank_type = user['players'][3]['creativity_rank_type']
        new_user.p4_threat_rank = user['players'][3]['threat_rank']
        new_user.p4_threat_rank_type = user['players'][3]['threat_rank_type']

        # player 5
        new_user.p5_chance_of_playing_next_round = user['players'][4]['chance_of_playing_next_round']
        new_user.p5_chance_of_playing_this_round = user['players'][4]['chance_of_playing_this_round']
        new_user.p5_code = user['players'][4]['code']
        new_user.p5_cost_change_event = user['players'][4]['cost_change_event']
        new_user.p5_cost_change_event_fall = user['players'][4]['cost_change_event_fall']
        new_user.p5_cost_change_start = user['players'][4]['cost_change_start']
        new_user.p5_cost_change_start_fall = user['players'][4]['cost_change_start_fall']
        new_user.p5_dreamteam_count = user['players'][4]['dreamteam_count']
        new_user.p5_element_type = user['players'][4]['element_type']
        new_user.p5_ep_next = user['players'][4]['ep_next']
        new_user.p5_ep_this = user['players'][4]['ep_this']
        new_user.p5_event_points = user['players'][4]['event_points']
        new_user.p5_first_name = user['players'][4]['first_name']
        new_user.p5_form = user['players'][4]['form']
        new_user.p5_player_id = user['players'][4]['id']
        new_user.p5_in_dreamteam = user['players'][4]['in_dreamteam']
        new_user.p5_news = user['players'][4]['news']
        new_user.p5_news_added = user['players'][4]['news_added']
        new_user.p5_now_cost = user['players'][4]['now_cost']
        new_user.p5_photo = user['players'][4]['photo']
        new_user.p5_points_per_game = user['players'][4]['points_per_game']
        new_user.p5_second_name = user['players'][4]['second_name']
        new_user.p5_selected_by_percent = user['players'][4]['selected_by_percent']
        new_user.p5_special = user['players'][4]['special']
        new_user.p5_squad_number = user['players'][4]['squad_number']
        new_user.p5_status = user['players'][4]['status']
        new_user.p5_team = user['players'][4]['team']
        new_user.p5_team_code = user['players'][4]['team_code']
        new_user.p5_total_points = user['players'][4]['total_points']
        new_user.p5_transfers_in = user['players'][4]['transfers_in']
        new_user.p5_transfers_in_event = user['players'][4]['transfers_in_event']
        new_user.p5_transfers_out = user['players'][4]['transfers_out']
        new_user.p5_transfers_out_event = user['players'][4]['transfers_out_event']
        new_user.p5_value_form = user['players'][4]['value_form']
        new_user.p5_value_season = user['players'][4]['value_season']
        new_user.p5_web_name = user['players'][4]['web_name']
        new_user.p5_minutes = user['players'][4]['minutes']
        new_user.p5_goals_scored = user['players'][4]['goals_scored']
        new_user.p5_assists = user['players'][4]['assists']
        new_user.p5_clean_sheets = user['players'][4]['clean_sheets']
        new_user.p5_own_goals = user['players'][4]['own_goals']
        new_user.p5_penalties_saved = user['players'][4]['penalties_saved']
        new_user.p5_yellow_cards = user['players'][4]['yellow_cards']
        new_user.p5_red_cards = user['players'][4]['red_cards']
        new_user.p5_saves = user['players'][4]['saves']
        new_user.p5_bonus = user['players'][4]['bonus']
        new_user.p5_bps = user['players'][4]['bps']
        new_user.p5_influence = user['players'][4]['influence']
        new_user.p5_creativity = user['players'][4]['creativity']
        new_user.p5_threat = user['players'][4]['threat']
        new_user.p5_ict_index = user['players'][4]['ict_index']
        new_user.p5_influence_rank = user['players'][4]['influence_rank']
        new_user.p5_influence_rank_type = user['players'][4]['influence_rank_type']
        new_user.p5_creativity_rank = user['players'][4]['creativity_rank']
        new_user.p5_creativity_rank_type = user['players'][4]['creativity_rank_type']
        new_user.p5_threat_rank = user['players'][4]['threat_rank']
        new_user.p5_threat_rank_type = user['players'][4]['threat_rank_type']

        # player 6
        new_user.p6_chance_of_playing_next_round = user['players'][5]['chance_of_playing_next_round']
        new_user.p6_chance_of_playing_this_round = user['players'][5]['chance_of_playing_this_round']
        new_user.p6_code = user['players'][5]['code']
        new_user.p6_cost_change_event = user['players'][5]['cost_change_event']
        new_user.p6_cost_change_event_fall = user['players'][5]['cost_change_event_fall']
        new_user.p6_cost_change_start = user['players'][5]['cost_change_start']
        new_user.p6_cost_change_start_fall = user['players'][5]['cost_change_start_fall']
        new_user.p6_dreamteam_count = user['players'][5]['dreamteam_count']
        new_user.p6_element_type = user['players'][5]['element_type']
        new_user.p6_ep_next = user['players'][5]['ep_next']
        new_user.p6_ep_this = user['players'][5]['ep_this']
        new_user.p6_event_points = user['players'][5]['event_points']
        new_user.p6_first_name = user['players'][5]['first_name']
        new_user.p6_form = user['players'][5]['form']
        new_user.p6_player_id = user['players'][5]['id']
        new_user.p6_in_dreamteam = user['players'][5]['in_dreamteam']
        new_user.p6_news = user['players'][5]['news']
        new_user.p6_news_added = user['players'][5]['news_added']
        new_user.p6_now_cost = user['players'][5]['now_cost']
        new_user.p6_photo = user['players'][5]['photo']
        new_user.p6_points_per_game = user['players'][5]['points_per_game']
        new_user.p6_second_name = user['players'][5]['second_name']
        new_user.p6_selected_by_percent = user['players'][5]['selected_by_percent']
        new_user.p6_special = user['players'][5]['special']
        new_user.p6_squad_number = user['players'][5]['squad_number']
        new_user.p6_status = user['players'][5]['status']
        new_user.p6_team = user['players'][5]['team']
        new_user.p6_team_code = user['players'][5]['team_code']
        new_user.p6_total_points = user['players'][5]['total_points']
        new_user.p6_transfers_in = user['players'][5]['transfers_in']
        new_user.p6_transfers_in_event = user['players'][5]['transfers_in_event']
        new_user.p6_transfers_out = user['players'][5]['transfers_out']
        new_user.p6_transfers_out_event = user['players'][5]['transfers_out_event']
        new_user.p6_value_form = user['players'][5]['value_form']
        new_user.p6_value_season = user['players'][5]['value_season']
        new_user.p6_web_name = user['players'][5]['web_name']
        new_user.p6_minutes = user['players'][5]['minutes']
        new_user.p6_goals_scored = user['players'][5]['goals_scored']
        new_user.p6_assists = user['players'][5]['assists']
        new_user.p6_clean_sheets = user['players'][5]['clean_sheets']
        new_user.p6_own_goals = user['players'][5]['own_goals']
        new_user.p6_penalties_saved = user['players'][5]['penalties_saved']
        new_user.p6_yellow_cards = user['players'][5]['yellow_cards']
        new_user.p6_red_cards = user['players'][5]['red_cards']
        new_user.p6_saves = user['players'][5]['saves']
        new_user.p6_bonus = user['players'][5]['bonus']
        new_user.p6_bps = user['players'][5]['bps']
        new_user.p6_influence = user['players'][5]['influence']
        new_user.p6_creativity = user['players'][5]['creativity']
        new_user.p6_threat = user['players'][5]['threat']
        new_user.p6_ict_index = user['players'][5]['ict_index']
        new_user.p6_influence_rank = user['players'][5]['influence_rank']
        new_user.p6_influence_rank_type = user['players'][5]['influence_rank_type']
        new_user.p6_creativity_rank = user['players'][5]['creativity_rank']
        new_user.p6_creativity_rank_type = user['players'][5]['creativity_rank_type']
        new_user.p6_threat_rank = user['players'][5]['threat_rank']
        new_user.p6_threat_rank_type = user['players'][5]['threat_rank_type']

        # player 7
        new_user.p7_chance_of_playing_next_round = user['players'][6]['chance_of_playing_next_round']
        new_user.p7_chance_of_playing_this_round = user['players'][6]['chance_of_playing_this_round']
        new_user.p7_code = user['players'][6]['code']
        new_user.p7_cost_change_event = user['players'][6]['cost_change_event']
        new_user.p7_cost_change_event_fall = user['players'][6]['cost_change_event_fall']
        new_user.p7_cost_change_start = user['players'][6]['cost_change_start']
        new_user.p7_cost_change_start_fall = user['players'][6]['cost_change_start_fall']
        new_user.p7_dreamteam_count = user['players'][6]['dreamteam_count']
        new_user.p7_element_type = user['players'][6]['element_type']
        new_user.p7_ep_next = user['players'][6]['ep_next']
        new_user.p7_ep_this = user['players'][6]['ep_this']
        new_user.p7_event_points = user['players'][6]['event_points']
        new_user.p7_first_name = user['players'][6]['first_name']
        new_user.p7_form = user['players'][6]['form']
        new_user.p7_player_id = user['players'][6]['id']
        new_user.p7_in_dreamteam = user['players'][6]['in_dreamteam']
        new_user.p7_news = user['players'][6]['news']
        new_user.p7_news_added = user['players'][6]['news_added']
        new_user.p7_now_cost = user['players'][6]['now_cost']
        new_user.p7_photo = user['players'][6]['photo']
        new_user.p7_points_per_game = user['players'][6]['points_per_game']
        new_user.p7_second_name = user['players'][6]['second_name']
        new_user.p7_selected_by_percent = user['players'][6]['selected_by_percent']
        new_user.p7_special = user['players'][6]['special']
        new_user.p7_squad_number = user['players'][6]['squad_number']
        new_user.p7_status = user['players'][6]['status']
        new_user.p7_team = user['players'][6]['team']
        new_user.p7_team_code = user['players'][6]['team_code']
        new_user.p7_total_points = user['players'][6]['total_points']
        new_user.p7_transfers_in = user['players'][6]['transfers_in']
        new_user.p7_transfers_in_event = user['players'][6]['transfers_in_event']
        new_user.p7_transfers_out = user['players'][6]['transfers_out']
        new_user.p7_transfers_out_event = user['players'][6]['transfers_out_event']
        new_user.p7_value_form = user['players'][6]['value_form']
        new_user.p7_value_season = user['players'][6]['value_season']
        new_user.p7_web_name = user['players'][6]['web_name']
        new_user.p7_minutes = user['players'][6]['minutes']
        new_user.p7_goals_scored = user['players'][6]['goals_scored']
        new_user.p7_assists = user['players'][6]['assists']
        new_user.p7_clean_sheets = user['players'][6]['clean_sheets']
        new_user.p7_own_goals = user['players'][6]['own_goals']
        new_user.p7_penalties_saved = user['players'][6]['penalties_saved']
        new_user.p7_yellow_cards = user['players'][6]['yellow_cards']
        new_user.p7_red_cards = user['players'][6]['red_cards']
        new_user.p7_saves = user['players'][6]['saves']
        new_user.p7_bonus = user['players'][6]['bonus']
        new_user.p7_bps = user['players'][6]['bps']
        new_user.p7_influence = user['players'][6]['influence']
        new_user.p7_creativity = user['players'][6]['creativity']
        new_user.p7_threat = user['players'][6]['threat']
        new_user.p7_ict_index = user['players'][6]['ict_index']
        new_user.p7_influence_rank = user['players'][6]['influence_rank']
        new_user.p7_influence_rank_type = user['players'][6]['influence_rank_type']
        new_user.p7_creativity_rank = user['players'][6]['creativity_rank']
        new_user.p7_creativity_rank_type = user['players'][6]['creativity_rank_type']
        new_user.p7_threat_rank = user['players'][6]['threat_rank']
        new_user.p7_threat_rank_type = user['players'][6]['threat_rank_type']
        # player 8
        new_user.p8_chance_of_playing_next_round = user['players'][7]['chance_of_playing_next_round']
        new_user.p8_chance_of_playing_this_round = user['players'][7]['chance_of_playing_this_round']
        new_user.p8_code = user['players'][7]['code']
        new_user.p8_cost_change_event = user['players'][7]['cost_change_event']
        new_user.p8_cost_change_event_fall = user['players'][7]['cost_change_event_fall']
        new_user.p8_cost_change_start = user['players'][7]['cost_change_start']
        new_user.p8_cost_change_start_fall = user['players'][7]['cost_change_start_fall']
        new_user.p8_dreamteam_count = user['players'][7]['dreamteam_count']
        new_user.p8_element_type = user['players'][7]['element_type']
        new_user.p8_ep_next = user['players'][7]['ep_next']
        new_user.p8_ep_this = user['players'][7]['ep_this']
        new_user.p8_event_points = user['players'][7]['event_points']
        new_user.p8_first_name = user['players'][7]['first_name']
        new_user.p8_form = user['players'][7]['form']
        new_user.p8_player_id = user['players'][7]['id']
        new_user.p8_in_dreamteam = user['players'][7]['in_dreamteam']
        new_user.p8_news = user['players'][7]['news']
        new_user.p8_news_added = user['players'][7]['news_added']
        new_user.p8_now_cost = user['players'][7]['now_cost']
        new_user.p8_photo = user['players'][7]['photo']
        new_user.p8_points_per_game = user['players'][7]['points_per_game']
        new_user.p8_second_name = user['players'][7]['second_name']
        new_user.p8_selected_by_percent = user['players'][7]['selected_by_percent']
        new_user.p8_special = user['players'][7]['special']
        new_user.p8_squad_number = user['players'][7]['squad_number']
        new_user.p8_status = user['players'][7]['status']
        new_user.p8_team = user['players'][7]['team']
        new_user.p8_team_code = user['players'][7]['team_code']
        new_user.p8_total_points = user['players'][7]['total_points']
        new_user.p8_transfers_in = user['players'][7]['transfers_in']
        new_user.p8_transfers_in_event = user['players'][7]['transfers_in_event']
        new_user.p8_transfers_out = user['players'][7]['transfers_out']
        new_user.p8_transfers_out_event = user['players'][7]['transfers_out_event']
        new_user.p8_value_form = user['players'][7]['value_form']
        new_user.p8_value_season = user['players'][7]['value_season']
        new_user.p8_web_name = user['players'][7]['web_name']
        new_user.p8_minutes = user['players'][7]['minutes']
        new_user.p8_goals_scored = user['players'][7]['goals_scored']
        new_user.p8_assists = user['players'][7]['assists']
        new_user.p8_clean_sheets = user['players'][7]['clean_sheets']
        new_user.p8_own_goals = user['players'][7]['own_goals']
        new_user.p8_penalties_saved = user['players'][7]['penalties_saved']
        new_user.p8_yellow_cards = user['players'][7]['yellow_cards']
        new_user.p8_red_cards = user['players'][7]['red_cards']
        new_user.p8_saves = user['players'][7]['saves']
        new_user.p8_bonus = user['players'][7]['bonus']
        new_user.p8_bps = user['players'][7]['bps']
        new_user.p8_influence = user['players'][7]['influence']
        new_user.p8_creativity = user['players'][7]['creativity']
        new_user.p8_threat = user['players'][7]['threat']
        new_user.p8_ict_index = user['players'][7]['ict_index']
        new_user.p8_influence_rank = user['players'][7]['influence_rank']
        new_user.p8_influence_rank_type = user['players'][7]['influence_rank_type']
        new_user.p8_creativity_rank = user['players'][7]['creativity_rank']
        new_user.p8_creativity_rank_type = user['players'][7]['creativity_rank_type']
        new_user.p8_threat_rank = user['players'][7]['threat_rank']
        new_user.p8_threat_rank_type = user['players'][7]['threat_rank_type']
        # player 9
        new_user.p9_chance_of_playing_next_round = user['players'][8]['chance_of_playing_next_round']
        new_user.p9_chance_of_playing_this_round = user['players'][8]['chance_of_playing_this_round']
        new_user.p9_code = user['players'][8]['code']
        new_user.p9_cost_change_event = user['players'][8]['cost_change_event']
        new_user.p9_cost_change_event_fall = user['players'][8]['cost_change_event_fall']
        new_user.p9_cost_change_start = user['players'][8]['cost_change_start']
        new_user.p9_cost_change_start_fall = user['players'][8]['cost_change_start_fall']
        new_user.p9_dreamteam_count = user['players'][8]['dreamteam_count']
        new_user.p9_element_type = user['players'][8]['element_type']
        new_user.p9_ep_next = user['players'][8]['ep_next']
        new_user.p9_ep_this = user['players'][8]['ep_this']
        new_user.p9_event_points = user['players'][8]['event_points']
        new_user.p9_first_name = user['players'][8]['first_name']
        new_user.p9_form = user['players'][8]['form']
        new_user.p9_player_id = user['players'][8]['id']
        new_user.p9_in_dreamteam = user['players'][8]['in_dreamteam']
        new_user.p9_news = user['players'][8]['news']
        new_user.p9_news_added = user['players'][8]['news_added']
        new_user.p9_now_cost = user['players'][8]['now_cost']
        new_user.p9_photo = user['players'][8]['photo']
        new_user.p9_points_per_game = user['players'][8]['points_per_game']
        new_user.p9_second_name = user['players'][8]['second_name']
        new_user.p9_selected_by_percent = user['players'][8]['selected_by_percent']
        new_user.p9_special = user['players'][8]['special']
        new_user.p9_squad_number = user['players'][8]['squad_number']
        new_user.p9_status = user['players'][8]['status']
        new_user.p9_team = user['players'][8]['team']
        new_user.p9_team_code = user['players'][8]['team_code']
        new_user.p9_total_points = user['players'][8]['total_points']
        new_user.p9_transfers_in = user['players'][8]['transfers_in']
        new_user.p9_transfers_in_event = user['players'][8]['transfers_in_event']
        new_user.p9_transfers_out = user['players'][8]['transfers_out']
        new_user.p9_transfers_out_event = user['players'][8]['transfers_out_event']
        new_user.p9_value_form = user['players'][8]['value_form']
        new_user.p9_value_season = user['players'][8]['value_season']
        new_user.p9_web_name = user['players'][8]['web_name']
        new_user.p9_minutes = user['players'][8]['minutes']
        new_user.p9_goals_scored = user['players'][8]['goals_scored']
        new_user.p9_assists = user['players'][8]['assists']
        new_user.p9_clean_sheets = user['players'][8]['clean_sheets']
        new_user.p9_own_goals = user['players'][8]['own_goals']
        new_user.p9_penalties_saved = user['players'][8]['penalties_saved']
        new_user.p9_yellow_cards = user['players'][8]['yellow_cards']
        new_user.p9_red_cards = user['players'][8]['red_cards']
        new_user.p9_saves = user['players'][8]['saves']
        new_user.p9_bonus = user['players'][8]['bonus']
        new_user.p9_bps = user['players'][8]['bps']
        new_user.p9_influence = user['players'][8]['influence']
        new_user.p9_creativity = user['players'][8]['creativity']
        new_user.p9_threat = user['players'][8]['threat']
        new_user.p9_ict_index = user['players'][8]['ict_index']
        new_user.p9_influence_rank = user['players'][8]['influence_rank']
        new_user.p9_influence_rank_type = user['players'][8]['influence_rank_type']
        new_user.p9_creativity_rank = user['players'][8]['creativity_rank']
        new_user.p9_creativity_rank_type = user['players'][8]['creativity_rank_type']
        new_user.p9_threat_rank = user['players'][8]['threat_rank']
        new_user.p9_threat_rank_type = user['players'][8]['threat_rank_type']

        # player 10
        new_user.p10_chance_of_playing_next_round = user['players'][9]['chance_of_playing_next_round']
        new_user.p10_chance_of_playing_this_round = user['players'][9]['chance_of_playing_this_round']
        new_user.p10_code = user['players'][9]['code']
        new_user.p10_cost_change_event = user['players'][9]['cost_change_event']
        new_user.p10_cost_change_event_fall = user['players'][9]['cost_change_event_fall']
        new_user.p10_cost_change_start = user['players'][9]['cost_change_start']
        new_user.p10_cost_change_start_fall = user['players'][9]['cost_change_start_fall']
        new_user.p10_dreamteam_count = user['players'][9]['dreamteam_count']
        new_user.p10_element_type = user['players'][9]['element_type']
        new_user.p10_ep_next = user['players'][9]['ep_next']
        new_user.p10_ep_this = user['players'][9]['ep_this']
        new_user.p10_event_points = user['players'][9]['event_points']
        new_user.p10_first_name = user['players'][9]['first_name']
        new_user.p10_form = user['players'][9]['form']
        new_user.p10_player_id = user['players'][9]['id']
        new_user.p10_in_dreamteam = user['players'][9]['in_dreamteam']
        new_user.p10_news = user['players'][9]['news']
        new_user.p10_news_added = user['players'][9]['news_added']
        new_user.p10_now_cost = user['players'][9]['now_cost']
        new_user.p10_photo = user['players'][9]['photo']
        new_user.p10_points_per_game = user['players'][9]['points_per_game']
        new_user.p10_second_name = user['players'][9]['second_name']
        new_user.p10_selected_by_percent = user['players'][9]['selected_by_percent']
        new_user.p10_special = user['players'][9]['special']
        new_user.p10_squad_number = user['players'][9]['squad_number']
        new_user.p10_status = user['players'][9]['status']
        new_user.p10_team = user['players'][9]['team']
        new_user.p10_team_code = user['players'][9]['team_code']
        new_user.p10_total_points = user['players'][9]['total_points']
        new_user.p10_transfers_in = user['players'][9]['transfers_in']
        new_user.p10_transfers_in_event = user['players'][9]['transfers_in_event']
        new_user.p10_transfers_out = user['players'][9]['transfers_out']
        new_user.p10_transfers_out_event = user['players'][9]['transfers_out_event']
        new_user.p10_value_form = user['players'][9]['value_form']
        new_user.p10_value_season = user['players'][9]['value_season']
        new_user.p10_web_name = user['players'][9]['web_name']
        new_user.p10_minutes = user['players'][9]['minutes']
        new_user.p10_goals_scored = user['players'][9]['goals_scored']
        new_user.p10_assists = user['players'][9]['assists']
        new_user.p10_clean_sheets = user['players'][9]['clean_sheets']
        new_user.p10_own_goals = user['players'][9]['own_goals']
        new_user.p10_penalties_saved = user['players'][9]['penalties_saved']
        new_user.p10_yellow_cards = user['players'][9]['yellow_cards']
        new_user.p10_red_cards = user['players'][9]['red_cards']
        new_user.p10_saves = user['players'][9]['saves']
        new_user.p10_bonus = user['players'][9]['bonus']
        new_user.p10_bps = user['players'][9]['bps']
        new_user.p10_influence = user['players'][9]['influence']
        new_user.p10_creativity = user['players'][9]['creativity']
        new_user.p10_threat = user['players'][9]['threat']
        new_user.p10_ict_index = user['players'][9]['ict_index']
        new_user.p10_influence_rank = user['players'][9]['influence_rank']
        new_user.p10_influence_rank_type = user['players'][9]['influence_rank_type']
        new_user.p10_creativity_rank = user['players'][9]['creativity_rank']
        new_user.p10_creativity_rank_type = user['players'][9]['creativity_rank_type']
        new_user.p10_threat_rank = user['players'][9]['threat_rank']
        new_user.p10_threat_rank_type = user['players'][9]['threat_rank_type']

        # player 11
        new_user.p11_chance_of_playing_next_round = user['players'][10]['chance_of_playing_next_round']
        new_user.p11_chance_of_playing_this_round = user['players'][10]['chance_of_playing_this_round']
        new_user.p11_code = user['players'][10]['code']
        new_user.p11_cost_change_event = user['players'][10]['cost_change_event']
        new_user.p11_cost_change_event_fall = user['players'][10]['cost_change_event_fall']
        new_user.p11_cost_change_start = user['players'][10]['cost_change_start']
        new_user.p1_cost_change_start_fall = user['players'][10]['cost_change_start_fall']
        new_user.p11_dreamteam_count = user['players'][10]['dreamteam_count']
        new_user.p11_element_type = user['players'][10]['element_type']
        new_user.p11_ep_next = user['players'][10]['ep_next']
        new_user.p11_ep_this = user['players'][10]['ep_this']
        new_user.p1_event_points = user['players'][10]['event_points']
        new_user.p11_first_name = user['players'][10]['first_name']
        new_user.p11_form = user['players'][10]['form']
        new_user.p11_player_id = user['players'][10]['id']
        new_user.p11_in_dreamteam = user['players'][10]['in_dreamteam']
        new_user.p11_news = user['players'][10]['news']
        new_user.p11_news_added = user['players'][10]['news_added']
        new_user.p11_now_cost = user['players'][10]['now_cost']
        new_user.p11_photo = user['players'][10]['photo']
        new_user.p11_points_per_game = user['players'][10]['points_per_game']
        new_user.p11_second_name = user['players'][10]['second_name']
        new_user.p11_selected_by_percent = user['players'][10]['selected_by_percent']
        new_user.p11_special = user['players'][10]['special']
        new_user.p11_squad_number = user['players'][10]['squad_number']
        new_user.p11_status = user['players'][10]['status']
        new_user.p11_team = user['players'][10]['team']
        new_user.p11_team_code = user['players'][10]['team_code']
        new_user.p11_total_points = user['players'][10]['total_points']
        new_user.p11_transfers_in = user['players'][10]['transfers_in']
        new_user.p11_transfers_in_event = user['players'][10]['transfers_in_event']
        new_user.p11_transfers_out = user['players'][10]['transfers_out']
        new_user.p11_transfers_out_event = user['players'][10]['transfers_out_event']
        new_user.p11_value_form = user['players'][10]['value_form']
        new_user.p11_value_season = user['players'][10]['value_season']
        new_user.p11_web_name = user['players'][10]['web_name']
        new_user.p11_minutes = user['players'][10]['minutes']
        new_user.p11_goals_scored = user['players'][10]['goals_scored']
        new_user.p11_assists = user['players'][10]['assists']
        new_user.p11_clean_sheets = user['players'][10]['clean_sheets']
        new_user.p11_own_goals = user['players'][10]['own_goals']
        new_user.p11_penalties_saved = user['players'][10]['penalties_saved']
        new_user.p11_yellow_cards = user['players'][10]['yellow_cards']
        new_user.p11_red_cards = user['players'][10]['red_cards']
        new_user.p11_saves = user['players'][10]['saves']
        new_user.p11_bonus = user['players'][10]['bonus']
        new_user.p11_bps = user['players'][10]['bps']
        new_user.p11_influence = user['players'][10]['influence']
        new_user.p11_creativity = user['players'][10]['creativity']
        new_user.p11_threat = user['players'][10]['threat']
        new_user.p11_ict_index = user['players'][10]['ict_index']
        new_user.p11_influence_rank = user['players'][10]['influence_rank']
        new_user.p11_influence_rank_type = user['players'][10]['influence_rank_type']
        new_user.p11_creativity_rank = user['players'][10]['creativity_rank']
        new_user.p11_creativity_rank_type = user['players'][10]['creativity_rank_type']
        new_user.p11_threat_rank = user['players'][10]['threat_rank']
        new_user.p11_threat_rank_type = user['players'][10]['threat_rank_type']

        # player 12
        new_user.p6_chance_of_playing_next_round = user['players'][5]['chance_of_playing_next_round']
        new_user.p6_chance_of_playing_this_round = user['players'][5]['chance_of_playing_this_round']
        new_user.p6_code = user['players'][5]['code']
        new_user.p6_cost_change_event = user['players'][5]['cost_change_event']
        new_user.p6_cost_change_event_fall = user['players'][5]['cost_change_event_fall']
        new_user.p6_cost_change_start = user['players'][5]['cost_change_start']
        new_user.p6_cost_change_start_fall = user['players'][5]['cost_change_start_fall']
        new_user.p6_dreamteam_count = user['players'][5]['dreamteam_count']
        new_user.p6_element_type = user['players'][5]['element_type']
        new_user.p6_ep_next = user['players'][5]['ep_next']
        new_user.p6_ep_this = user['players'][5]['ep_this']
        new_user.p6_event_points = user['players'][5]['event_points']
        new_user.p6_first_name = user['players'][5]['first_name']
        new_user.p6_form = user['players'][5]['form']
        new_user.p6_player_id = user['players'][5]['id']
        new_user.p6_in_dreamteam = user['players'][5]['in_dreamteam']
        new_user.p6_news = user['players'][5]['news']
        new_user.p6_news_added = user['players'][5]['news_added']
        new_user.p6_now_cost = user['players'][5]['now_cost']
        new_user.p6_photo = user['players'][5]['photo']
        new_user.p6_points_per_game = user['players'][5]['points_per_game']
        new_user.p6_second_name = user['players'][5]['second_name']
        new_user.p6_selected_by_percent = user['players'][5]['selected_by_percent']
        new_user.p6_special = user['players'][5]['special']
        new_user.p6_squad_number = user['players'][5]['squad_number']
        new_user.p6_status = user['players'][5]['status']
        new_user.p6_team = user['players'][5]['team']
        new_user.p6_team_code = user['players'][5]['team_code']
        new_user.p6_total_points = user['players'][5]['total_points']
        new_user.p6_transfers_in = user['players'][5]['transfers_in']
        new_user.p6_transfers_in_event = user['players'][5]['transfers_in_event']
        new_user.p6_transfers_out = user['players'][5]['transfers_out']
        new_user.p6_transfers_out_event = user['players'][5]['transfers_out_event']
        new_user.p6_value_form = user['players'][5]['value_form']
        new_user.p6_value_season = user['players'][5]['value_season']
        new_user.p6_web_name = user['players'][5]['web_name']
        new_user.p6_minutes = user['players'][5]['minutes']
        new_user.p6_goals_scored = user['players'][5]['goals_scored']
        new_user.p6_assists = user['players'][5]['assists']
        new_user.p6_clean_sheets = user['players'][5]['clean_sheets']
        new_user.p6_own_goals = user['players'][5]['own_goals']
        new_user.p6_penalties_saved = user['players'][5]['penalties_saved']
        new_user.p6_yellow_cards = user['players'][5]['yellow_cards']
        new_user.p6_red_cards = user['players'][5]['red_cards']
        new_user.p6_saves = user['players'][5]['saves']
        new_user.p6_bonus = user['players'][5]['bonus']
        new_user.p6_bps = user['players'][5]['bps']
        new_user.p6_influence = user['players'][5]['influence']
        new_user.p6_creativity = user['players'][5]['creativity']
        new_user.p6_threat = user['players'][5]['threat']
        new_user.p6_ict_index = user['players'][5]['ict_index']
        new_user.p6_influence_rank = user['players'][5]['influence_rank']
        new_user.p6_influence_rank_type = user['players'][5]['influence_rank_type']
        new_user.p6_creativity_rank = user['players'][5]['creativity_rank']
        new_user.p6_creativity_rank_type = user['players'][5]['creativity_rank_type']
        new_user.p6_threat_rank = user['players'][5]['threat_rank']
        new_user.p6_threat_rank_type = user['players'][5]['threat_rank_type']


        db.session.add(new_user)
        db.session.commit()
        session['user_id'] = new_user.id

        flash(f'Welcome {email}! Successfully Created Your Account!')
        return redirect(f'/user/{new_user.id}')
    return render_template('/register.html', form=form)

# login
@app.route('/logon', methods=['GET','POST'])
def login_user():
    form = LoginForm()
    if form.validate_on_submit():
        email = form.email.data
        password = form.password.data
        user = Users.authenticate(email, password)
        if user:
            session['user_id'] = user.id
            return redirect(f'/user/{user.id}')
        else:
            form.email.errors = ['Invalid username/password.']
    return render_template('login.html', form=form)

@app.route('/user/<int:user_id>')
def user_route(user_id):
    users = Users.query.get_or_404(user_id)
    jerseys = jersey_list
    return render_template('user.html', users=users, jerseys=jerseys)

@app.route('/logout')
def logout():
    session.pop('user_id')
    flash("Goodbye!")
    return redirect('/')
