from flask import Flask, flash, request, redirect, render_template, session, g
from flask_debugtoolbar import DebugToolbarExtension
from models import connect_db, db, Users, Chat, Team
from forms import UserForm, ChatForm, LoginForm
from methods import user, make_user_profile, all_footballers, user_personal_info, starting_vi, position1, classic_league_standings
from analysis import assistant_suggestions
from jersey_selection import jersey_list
import datetime
import os

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = os.environ.get('DATABASE_URL', 'postgresql:///cap_db')#.replace("://", "ql://", 1)
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False
app.config['SQLALCHEMY_ECHO'] = True
app.config['SECRET_KEY'] = os.environ.get('SECRET_KEY', 'crowBottom')
app.config['DEBUG_TB_INTERCEPT_REDIRECTS'] = False

connect_db(app)
toolbar = DebugToolbarExtension(app)



# home route ###################################################################
@app.route('/')
def home_route():
    return render_template('home.html')



# register and create user #####################################################
# register a new user
@app.route('/register', methods=['GET', 'POST'])
def register_user():
    form = UserForm()

    if form.validate_on_submit():
        email = form.email.data
        password = form.password.data
        team_id = form.team_id.data

        # hit the endpoints
        make_user_profile(email, password, team_id)

        new_user = Users.register(email, password, team_id)
        db.session.add(new_user)
        db.session.commit()
        session['user_id'] = new_user.id
        return redirect(f'/user/create/{new_user.id}')

    return render_template('/register.html', form=form)

# create user
@app.route('/user/create/<int:user_id>')
def create_user(user_id):
    # 1st- create a new team in the Team table and associate it with the new user that was just created through the registration route
    new_team = Team(user_id=user_id)
    db.session.add(new_team)
    db.session.commit()

    # 2nd - grab the new team we created with it's assciation to the user that was just registered and use the response data from the imported file 'user' to create the new user's data
    new_user = Team.query.get_or_404(user_id)
    new_user.team_name = user['team_name']
    new_user.fav_team = user['fav_team']
    new_user.fav_team_id = user['fav_team_id']
    new_user.fav_team_logo = user['fav_team_logo']
    new_user.fav_team_colors = user['fav_team_colors']
    new_user.fav_team_jersey = user['fav_team_jersey']
    new_user.fav_team_jersey_goal = user['fav_team_jersey_goal']
    new_user.classic_league_id = user['classic_league_id']
    new_user.overall_points = user['overall_points']
    new_user.gameweek_points = user['gameweek_points']
    new_user.classic_league_name = user['classic_league_name']
    new_user.classic_league_rank = user['classic_league_rank']
    new_user.classic_league_rank_previous = user['classic_league_rank_previous']

    # player 1
    new_user.p1_chance_of_playing_next_round = user['players'][0]['chance_of_playing_next_round']
    new_user.p1_chance_of_playing_this_round = user['players'][0]['chance_of_playing_this_round']
    new_user.p1_code = user['players'][0]['code']
    new_user.p1_cost_change_event = user['players'][0]['cost_change_event']
    new_user.p1_cost_change_event_fall = user['players'][0]['cost_change_event_fall']
    new_user.p1_cost_change_start = user['players'][0]['cost_change_start']
    new_user.p1_cost_change_start_fall = user['players'][0]['cost_change_start_fall']
    new_user.p1_dreamteam_count = user['players'][0]['dreamteam_count']
    new_user.p1_element_type = user['players'][0]['element_type']
    new_user.p1_ep_next = user['players'][0]['ep_next']
    new_user.p1_ep_this = user['players'][0]['ep_this']
    new_user.p1_event_points = user['players'][0]['event_points']
    new_user.p1_first_name = user['players'][0]['first_name']
    new_user.p1_form = user['players'][0]['form']
    new_user.p1_player_id = user['players'][0]['id']
    new_user.p1_in_dreamteam = user['players'][0]['in_dreamteam']
    new_user.p1_news = user['players'][0]['news']
    new_user.p1_news_added = user['players'][0]['news_added']
    new_user.p1_now_cost = user['players'][0]['now_cost']
    new_user.p1_photo = user['players'][0]['photo']
    new_user.p1_points_per_game = user['players'][0]['points_per_game']
    new_user.p1_second_name = user['players'][0]['second_name']
    new_user.p1_selected_by_percent = user['players'][0]['selected_by_percent']
    new_user.p1_special = user['players'][0]['special']
    new_user.p1_squad_number = user['players'][0]['squad_number']
    new_user.p1_status = user['players'][0]['status']
    new_user.p1_team = user['players'][0]['team']
    new_user.p1_team_code = user['players'][0]['team_code']
    new_user.p1_total_points = user['players'][0]['total_points']
    new_user.p1_transfers_in = user['players'][0]['transfers_in']
    new_user.p1_transfers_in_event = user['players'][0]['transfers_in_event']
    new_user.p1_transfers_out = user['players'][0]['transfers_out']
    new_user.p1_transfers_out_event = user['players'][0]['transfers_out_event']
    new_user.p1_value_form = user['players'][0]['value_form']
    new_user.p1_value_season = user['players'][0]['value_season']
    new_user.p1_web_name = user['players'][0]['web_name']
    new_user.p1_minutes = user['players'][0]['minutes']
    new_user.p1_goals_scored = user['players'][0]['goals_scored']
    new_user.p1_assists = user['players'][0]['assists']
    new_user.p1_clean_sheets = user['players'][0]['clean_sheets']
    new_user.p1_own_goals = user['players'][0]['own_goals']
    new_user.p1_penalties_saved = user['players'][0]['penalties_saved']
    new_user.p1_yellow_cards = user['players'][0]['yellow_cards']
    new_user.p1_red_cards = user['players'][0]['red_cards']
    new_user.p1_saves = user['players'][0]['saves']
    new_user.p1_bonus = user['players'][0]['bonus']
    new_user.p1_bps = user['players'][0]['bps']
    new_user.p1_influence = user['players'][0]['influence']
    new_user.p1_creativity = user['players'][0]['creativity']
    new_user.p1_threat = user['players'][0]['threat']
    new_user.p1_ict_index = user['players'][0]['ict_index']
    new_user.p1_influence_rank = user['players'][0]['influence_rank']
    new_user.p1_influence_rank_type = user['players'][0]['influence_rank_type']
    new_user.p1_creativity_rank = user['players'][0]['creativity_rank']
    new_user.p1_creativity_rank_type = user['players'][0]['creativity_rank_type']
    new_user.p1_threat_rank = user['players'][0]['threat_rank']
    new_user.p1_threat_rank_type = user['players'][0]['threat_rank_type']
    # player 2
    new_user.p2_chance_of_playing_next_round = user['players'][1]['chance_of_playing_next_round']
    new_user.p2_chance_of_playing_this_round = user['players'][1]['chance_of_playing_this_round']
    new_user.p2_code = user['players'][1]['code']
    new_user.p2_cost_change_event = user['players'][1]['cost_change_event']
    new_user.p2_cost_change_event_fall = user['players'][1]['cost_change_event_fall']
    new_user.p2_cost_change_start = user['players'][1]['cost_change_start']
    new_user.p2_cost_change_start_fall = user['players'][1]['cost_change_start_fall']
    new_user.p2_dreamteam_count = user['players'][1]['dreamteam_count']
    new_user.p2_element_type = user['players'][1]['element_type']
    new_user.p2_ep_next = user['players'][1]['ep_next']
    new_user.p2_ep_this = user['players'][1]['ep_this']
    new_user.p2_event_points = user['players'][1]['event_points']
    new_user.p2_first_name = user['players'][1]['first_name']
    new_user.p2_form = user['players'][1]['form']
    new_user.p2_player_id = user['players'][1]['id']
    new_user.p2_in_dreamteam = user['players'][1]['in_dreamteam']
    new_user.p2_news = user['players'][1]['news']
    new_user.p2_news_added = user['players'][1]['news_added']
    new_user.p2_now_cost = user['players'][1]['now_cost']
    new_user.p2_photo = user['players'][1]['photo']
    new_user.p2_points_per_game = user['players'][1]['points_per_game']
    new_user.p2_second_name = user['players'][1]['second_name']
    new_user.p2_selected_by_percent = user['players'][1]['selected_by_percent']
    new_user.p2_special = user['players'][1]['special']
    new_user.p2_squad_number = user['players'][1]['squad_number']
    new_user.p2_status = user['players'][1]['status']
    new_user.p2_team = user['players'][1]['team']
    new_user.p2_team_code = user['players'][1]['team_code']
    new_user.p2_total_points = user['players'][1]['total_points']
    new_user.p2_transfers_in = user['players'][1]['transfers_in']
    new_user.p2_transfers_in_event = user['players'][1]['transfers_in_event']
    new_user.p2_transfers_out = user['players'][1]['transfers_out']
    new_user.p2_transfers_out_event = user['players'][1]['transfers_out_event']
    new_user.p2_value_form = user['players'][1]['value_form']
    new_user.p2_value_season = user['players'][1]['value_season']
    new_user.p2_web_name = user['players'][1]['web_name']
    new_user.p2_minutes = user['players'][1]['minutes']
    new_user.p2_goals_scored = user['players'][1]['goals_scored']
    new_user.p2_assists = user['players'][1]['assists']
    new_user.p2_clean_sheets = user['players'][1]['clean_sheets']
    new_user.p2_own_goals = user['players'][1]['own_goals']
    new_user.p2_penalties_saved = user['players'][1]['penalties_saved']
    new_user.p2_yellow_cards = user['players'][1]['yellow_cards']
    new_user.p2_red_cards = user['players'][1]['red_cards']
    new_user.p2_saves = user['players'][1]['saves']
    new_user.p2_bonus = user['players'][1]['bonus']
    new_user.p2_bps = user['players'][1]['bps']
    new_user.p2_influence = user['players'][1]['influence']
    new_user.p2_creativity = user['players'][1]['creativity']
    new_user.p2_threat = user['players'][1]['threat']
    new_user.p2_ict_index = user['players'][1]['ict_index']
    new_user.p2_influence_rank = user['players'][1]['influence_rank']
    new_user.p2_influence_rank_type = user['players'][1]['influence_rank_type']
    new_user.p2_creativity_rank = user['players'][1]['creativity_rank']
    new_user.p2_creativity_rank_type = user['players'][1]['creativity_rank_type']
    new_user.p2_threat_rank = user['players'][1]['threat_rank']
    new_user.p2_threat_rank_type = user['players'][1]['threat_rank_type']
    # player 3
    new_user.p3_chance_of_playing_next_round = user['players'][2]['chance_of_playing_next_round']
    new_user.p3_chance_of_playing_this_round = user['players'][2]['chance_of_playing_this_round']
    new_user.p3_code = user['players'][2]['code']
    new_user.p3_cost_change_event = user['players'][2]['cost_change_event']
    new_user.p3_cost_change_event_fall = user['players'][2]['cost_change_event_fall']
    new_user.p3_cost_change_start = user['players'][2]['cost_change_start']
    new_user.p3_cost_change_start_fall = user['players'][2]['cost_change_start_fall']
    new_user.p3_dreamteam_count = user['players'][2]['dreamteam_count']
    new_user.p3_element_type = user['players'][2]['element_type']
    new_user.p3_ep_next = user['players'][2]['ep_next']
    new_user.p3_ep_this = user['players'][2]['ep_this']
    new_user.p3_event_points = user['players'][2]['event_points']
    new_user.p3_first_name = user['players'][2]['first_name']
    new_user.p3_form = user['players'][2]['form']
    new_user.p3_player_id = user['players'][2]['id']
    new_user.p3_in_dreamteam = user['players'][2]['in_dreamteam']
    new_user.p3_news = user['players'][2]['news']
    new_user.p3_news_added = user['players'][2]['news_added']
    new_user.p3_now_cost = user['players'][2]['now_cost']
    new_user.p3_photo = user['players'][2]['photo']
    new_user.p3_points_per_game = user['players'][2]['points_per_game']
    new_user.p3_second_name = user['players'][2]['second_name']
    new_user.p3_selected_by_percent = user['players'][2]['selected_by_percent']
    new_user.p3_special = user['players'][2]['special']
    new_user.p3_squad_number = user['players'][2]['squad_number']
    new_user.p3_status = user['players'][2]['status']
    new_user.p3_team = user['players'][2]['team']
    new_user.p3_team_code = user['players'][2]['team_code']
    new_user.p3_total_points = user['players'][2]['total_points']
    new_user.p3_transfers_in = user['players'][2]['transfers_in']
    new_user.p3_transfers_in_event = user['players'][2]['transfers_in_event']
    new_user.p3_transfers_out = user['players'][2]['transfers_out']
    new_user.p3_transfers_out_event = user['players'][2]['transfers_out_event']
    new_user.p3_value_form = user['players'][2]['value_form']
    new_user.p3_value_season = user['players'][2]['value_season']
    new_user.p3_web_name = user['players'][2]['web_name']
    new_user.p3_minutes = user['players'][2]['minutes']
    new_user.p3_goals_scored = user['players'][2]['goals_scored']
    new_user.p3_assists = user['players'][2]['assists']
    new_user.p3_clean_sheets = user['players'][2]['clean_sheets']
    new_user.p3_own_goals = user['players'][2]['own_goals']
    new_user.p3_penalties_saved = user['players'][2]['penalties_saved']
    new_user.p3_yellow_cards = user['players'][2]['yellow_cards']
    new_user.p3_red_cards = user['players'][2]['red_cards']
    new_user.p3_saves = user['players'][2]['saves']
    new_user.p3_bonus = user['players'][2]['bonus']
    new_user.p3_bps = user['players'][2]['bps']
    new_user.p3_influence = user['players'][2]['influence']
    new_user.p3_creativity = user['players'][2]['creativity']
    new_user.p3_threat = user['players'][2]['threat']
    new_user.p3_ict_index = user['players'][2]['ict_index']
    new_user.p3_influence_rank = user['players'][2]['influence_rank']
    new_user.p3_influence_rank_type = user['players'][2]['influence_rank_type']
    new_user.p3_creativity_rank = user['players'][2]['creativity_rank']
    new_user.p3_creativity_rank_type = user['players'][2]['creativity_rank_type']
    new_user.p3_threat_rank = user['players'][2]['threat_rank']
    new_user.p3_threat_rank_type = user['players'][2]['threat_rank_type']

    # player 4
    new_user.p4_chance_of_playing_next_round = user['players'][3]['chance_of_playing_next_round']
    new_user.p4_chance_of_playing_this_round = user['players'][3]['chance_of_playing_this_round']
    new_user.p4_code = user['players'][3]['code']
    new_user.p4_cost_change_event = user['players'][3]['cost_change_event']
    new_user.p4_cost_change_event_fall = user['players'][3]['cost_change_event_fall']
    new_user.p4_cost_change_start = user['players'][3]['cost_change_start']
    new_user.p4_cost_change_start_fall = user['players'][3]['cost_change_start_fall']
    new_user.p4_dreamteam_count = user['players'][3]['dreamteam_count']
    new_user.p4_element_type = user['players'][3]['element_type']
    new_user.p4_ep_next = user['players'][3]['ep_next']
    new_user.p4_ep_this = user['players'][3]['ep_this']
    new_user.p4_event_points = user['players'][3]['event_points']
    new_user.p4_first_name = user['players'][3]['first_name']
    new_user.p4_form = user['players'][3]['form']
    new_user.p4_player_id = user['players'][3]['id']
    new_user.p4_in_dreamteam = user['players'][3]['in_dreamteam']
    new_user.p4_news = user['players'][3]['news']
    new_user.p4_news_added = user['players'][3]['news_added']
    new_user.p4_now_cost = user['players'][3]['now_cost']
    new_user.p4_photo = user['players'][3]['photo']
    new_user.p4_points_per_game = user['players'][3]['points_per_game']
    new_user.p4_second_name = user['players'][3]['second_name']
    new_user.p4_selected_by_percent = user['players'][3]['selected_by_percent']
    new_user.p4_special = user['players'][3]['special']
    new_user.p4_squad_number = user['players'][3]['squad_number']
    new_user.p4_status = user['players'][3]['status']
    new_user.p4_team = user['players'][3]['team']
    new_user.p4_team_code = user['players'][3]['team_code']
    new_user.p4_total_points = user['players'][3]['total_points']
    new_user.p4_transfers_in = user['players'][3]['transfers_in']
    new_user.p4_transfers_in_event = user['players'][3]['transfers_in_event']
    new_user.p4_transfers_out = user['players'][3]['transfers_out']
    new_user.p4_transfers_out_event = user['players'][3]['transfers_out_event']
    new_user.p4_value_form = user['players'][3]['value_form']
    new_user.p4_value_season = user['players'][3]['value_season']
    new_user.p4_web_name = user['players'][3]['web_name']
    new_user.p4_minutes = user['players'][3]['minutes']
    new_user.p4_goals_scored = user['players'][3]['goals_scored']
    new_user.p4_assists = user['players'][3]['assists']
    new_user.p4_clean_sheets = user['players'][3]['clean_sheets']
    new_user.p4_own_goals = user['players'][3]['own_goals']
    new_user.p4_penalties_saved = user['players'][3]['penalties_saved']
    new_user.p4_yellow_cards = user['players'][3]['yellow_cards']
    new_user.p4_red_cards = user['players'][3]['red_cards']
    new_user.p4_saves = user['players'][3]['saves']
    new_user.p4_bonus = user['players'][3]['bonus']
    new_user.p4_bps = user['players'][3]['bps']
    new_user.p4_influence = user['players'][3]['influence']
    new_user.p4_creativity = user['players'][3]['creativity']
    new_user.p4_threat = user['players'][3]['threat']
    new_user.p4_ict_index = user['players'][3]['ict_index']
    new_user.p4_influence_rank = user['players'][3]['influence_rank']
    new_user.p4_influence_rank_type = user['players'][3]['influence_rank_type']
    new_user.p4_creativity_rank = user['players'][3]['creativity_rank']
    new_user.p4_creativity_rank_type = user['players'][3]['creativity_rank_type']
    new_user.p4_threat_rank = user['players'][3]['threat_rank']
    new_user.p4_threat_rank_type = user['players'][3]['threat_rank_type']

    # player 5
    new_user.p5_chance_of_playing_next_round = user['players'][4]['chance_of_playing_next_round']
    new_user.p5_chance_of_playing_this_round = user['players'][4]['chance_of_playing_this_round']
    new_user.p5_code = user['players'][4]['code']
    new_user.p5_cost_change_event = user['players'][4]['cost_change_event']
    new_user.p5_cost_change_event_fall = user['players'][4]['cost_change_event_fall']
    new_user.p5_cost_change_start = user['players'][4]['cost_change_start']
    new_user.p5_cost_change_start_fall = user['players'][4]['cost_change_start_fall']
    new_user.p5_dreamteam_count = user['players'][4]['dreamteam_count']
    new_user.p5_element_type = user['players'][4]['element_type']
    new_user.p5_ep_next = user['players'][4]['ep_next']
    new_user.p5_ep_this = user['players'][4]['ep_this']
    new_user.p5_event_points = user['players'][4]['event_points']
    new_user.p5_first_name = user['players'][4]['first_name']
    new_user.p5_form = user['players'][4]['form']
    new_user.p5_player_id = user['players'][4]['id']
    new_user.p5_in_dreamteam = user['players'][4]['in_dreamteam']
    new_user.p5_news = user['players'][4]['news']
    new_user.p5_news_added = user['players'][4]['news_added']
    new_user.p5_now_cost = user['players'][4]['now_cost']
    new_user.p5_photo = user['players'][4]['photo']
    new_user.p5_points_per_game = user['players'][4]['points_per_game']
    new_user.p5_second_name = user['players'][4]['second_name']
    new_user.p5_selected_by_percent = user['players'][4]['selected_by_percent']
    new_user.p5_special = user['players'][4]['special']
    new_user.p5_squad_number = user['players'][4]['squad_number']
    new_user.p5_status = user['players'][4]['status']
    new_user.p5_team = user['players'][4]['team']
    new_user.p5_team_code = user['players'][4]['team_code']
    new_user.p5_total_points = user['players'][4]['total_points']
    new_user.p5_transfers_in = user['players'][4]['transfers_in']
    new_user.p5_transfers_in_event = user['players'][4]['transfers_in_event']
    new_user.p5_transfers_out = user['players'][4]['transfers_out']
    new_user.p5_transfers_out_event = user['players'][4]['transfers_out_event']
    new_user.p5_value_form = user['players'][4]['value_form']
    new_user.p5_value_season = user['players'][4]['value_season']
    new_user.p5_web_name = user['players'][4]['web_name']
    new_user.p5_minutes = user['players'][4]['minutes']
    new_user.p5_goals_scored = user['players'][4]['goals_scored']
    new_user.p5_assists = user['players'][4]['assists']
    new_user.p5_clean_sheets = user['players'][4]['clean_sheets']
    new_user.p5_own_goals = user['players'][4]['own_goals']
    new_user.p5_penalties_saved = user['players'][4]['penalties_saved']
    new_user.p5_yellow_cards = user['players'][4]['yellow_cards']
    new_user.p5_red_cards = user['players'][4]['red_cards']
    new_user.p5_saves = user['players'][4]['saves']
    new_user.p5_bonus = user['players'][4]['bonus']
    new_user.p5_bps = user['players'][4]['bps']
    new_user.p5_influence = user['players'][4]['influence']
    new_user.p5_creativity = user['players'][4]['creativity']
    new_user.p5_threat = user['players'][4]['threat']
    new_user.p5_ict_index = user['players'][4]['ict_index']
    new_user.p5_influence_rank = user['players'][4]['influence_rank']
    new_user.p5_influence_rank_type = user['players'][4]['influence_rank_type']
    new_user.p5_creativity_rank = user['players'][4]['creativity_rank']
    new_user.p5_creativity_rank_type = user['players'][4]['creativity_rank_type']
    new_user.p5_threat_rank = user['players'][4]['threat_rank']
    new_user.p5_threat_rank_type = user['players'][4]['threat_rank_type']

    # player 6
    new_user.p6_chance_of_playing_next_round = user['players'][5]['chance_of_playing_next_round']
    new_user.p6_chance_of_playing_this_round = user['players'][5]['chance_of_playing_this_round']
    new_user.p6_code = user['players'][5]['code']
    new_user.p6_cost_change_event = user['players'][5]['cost_change_event']
    new_user.p6_cost_change_event_fall = user['players'][5]['cost_change_event_fall']
    new_user.p6_cost_change_start = user['players'][5]['cost_change_start']
    new_user.p6_cost_change_start_fall = user['players'][5]['cost_change_start_fall']
    new_user.p6_dreamteam_count = user['players'][5]['dreamteam_count']
    new_user.p6_element_type = user['players'][5]['element_type']
    new_user.p6_ep_next = user['players'][5]['ep_next']
    new_user.p6_ep_this = user['players'][5]['ep_this']
    new_user.p6_event_points = user['players'][5]['event_points']
    new_user.p6_first_name = user['players'][5]['first_name']
    new_user.p6_form = user['players'][5]['form']
    new_user.p6_player_id = user['players'][5]['id']
    new_user.p6_in_dreamteam = user['players'][5]['in_dreamteam']
    new_user.p6_news = user['players'][5]['news']
    new_user.p6_news_added = user['players'][5]['news_added']
    new_user.p6_now_cost = user['players'][5]['now_cost']
    new_user.p6_photo = user['players'][5]['photo']
    new_user.p6_points_per_game = user['players'][5]['points_per_game']
    new_user.p6_second_name = user['players'][5]['second_name']
    new_user.p6_selected_by_percent = user['players'][5]['selected_by_percent']
    new_user.p6_special = user['players'][5]['special']
    new_user.p6_squad_number = user['players'][5]['squad_number']
    new_user.p6_status = user['players'][5]['status']
    new_user.p6_team = user['players'][5]['team']
    new_user.p6_team_code = user['players'][5]['team_code']
    new_user.p6_total_points = user['players'][5]['total_points']
    new_user.p6_transfers_in = user['players'][5]['transfers_in']
    new_user.p6_transfers_in_event = user['players'][5]['transfers_in_event']
    new_user.p6_transfers_out = user['players'][5]['transfers_out']
    new_user.p6_transfers_out_event = user['players'][5]['transfers_out_event']
    new_user.p6_value_form = user['players'][5]['value_form']
    new_user.p6_value_season = user['players'][5]['value_season']
    new_user.p6_web_name = user['players'][5]['web_name']
    new_user.p6_minutes = user['players'][5]['minutes']
    new_user.p6_goals_scored = user['players'][5]['goals_scored']
    new_user.p6_assists = user['players'][5]['assists']
    new_user.p6_clean_sheets = user['players'][5]['clean_sheets']
    new_user.p6_own_goals = user['players'][5]['own_goals']
    new_user.p6_penalties_saved = user['players'][5]['penalties_saved']
    new_user.p6_yellow_cards = user['players'][5]['yellow_cards']
    new_user.p6_red_cards = user['players'][5]['red_cards']
    new_user.p6_saves = user['players'][5]['saves']
    new_user.p6_bonus = user['players'][5]['bonus']
    new_user.p6_bps = user['players'][5]['bps']
    new_user.p6_influence = user['players'][5]['influence']
    new_user.p6_creativity = user['players'][5]['creativity']
    new_user.p6_threat = user['players'][5]['threat']
    new_user.p6_ict_index = user['players'][5]['ict_index']
    new_user.p6_influence_rank = user['players'][5]['influence_rank']
    new_user.p6_influence_rank_type = user['players'][5]['influence_rank_type']
    new_user.p6_creativity_rank = user['players'][5]['creativity_rank']
    new_user.p6_creativity_rank_type = user['players'][5]['creativity_rank_type']
    new_user.p6_threat_rank = user['players'][5]['threat_rank']
    new_user.p6_threat_rank_type = user['players'][5]['threat_rank_type']

    # player 7
    new_user.p7_chance_of_playing_next_round = user['players'][6]['chance_of_playing_next_round']
    new_user.p7_chance_of_playing_this_round = user['players'][6]['chance_of_playing_this_round']
    new_user.p7_code = user['players'][6]['code']
    new_user.p7_cost_change_event = user['players'][6]['cost_change_event']
    new_user.p7_cost_change_event_fall = user['players'][6]['cost_change_event_fall']
    new_user.p7_cost_change_start = user['players'][6]['cost_change_start']
    new_user.p7_cost_change_start_fall = user['players'][6]['cost_change_start_fall']
    new_user.p7_dreamteam_count = user['players'][6]['dreamteam_count']
    new_user.p7_element_type = user['players'][6]['element_type']
    new_user.p7_ep_next = user['players'][6]['ep_next']
    new_user.p7_ep_this = user['players'][6]['ep_this']
    new_user.p7_event_points = user['players'][6]['event_points']
    new_user.p7_first_name = user['players'][6]['first_name']
    new_user.p7_form = user['players'][6]['form']
    new_user.p7_player_id = user['players'][6]['id']
    new_user.p7_in_dreamteam = user['players'][6]['in_dreamteam']
    new_user.p7_news = user['players'][6]['news']
    new_user.p7_news_added = user['players'][6]['news_added']
    new_user.p7_now_cost = user['players'][6]['now_cost']
    new_user.p7_photo = user['players'][6]['photo']
    new_user.p7_points_per_game = user['players'][6]['points_per_game']
    new_user.p7_second_name = user['players'][6]['second_name']
    new_user.p7_selected_by_percent = user['players'][6]['selected_by_percent']
    new_user.p7_special = user['players'][6]['special']
    new_user.p7_squad_number = user['players'][6]['squad_number']
    new_user.p7_status = user['players'][6]['status']
    new_user.p7_team = user['players'][6]['team']
    new_user.p7_team_code = user['players'][6]['team_code']
    new_user.p7_total_points = user['players'][6]['total_points']
    new_user.p7_transfers_in = user['players'][6]['transfers_in']
    new_user.p7_transfers_in_event = user['players'][6]['transfers_in_event']
    new_user.p7_transfers_out = user['players'][6]['transfers_out']
    new_user.p7_transfers_out_event = user['players'][6]['transfers_out_event']
    new_user.p7_value_form = user['players'][6]['value_form']
    new_user.p7_value_season = user['players'][6]['value_season']
    new_user.p7_web_name = user['players'][6]['web_name']
    new_user.p7_minutes = user['players'][6]['minutes']
    new_user.p7_goals_scored = user['players'][6]['goals_scored']
    new_user.p7_assists = user['players'][6]['assists']
    new_user.p7_clean_sheets = user['players'][6]['clean_sheets']
    new_user.p7_own_goals = user['players'][6]['own_goals']
    new_user.p7_penalties_saved = user['players'][6]['penalties_saved']
    new_user.p7_yellow_cards = user['players'][6]['yellow_cards']
    new_user.p7_red_cards = user['players'][6]['red_cards']
    new_user.p7_saves = user['players'][6]['saves']
    new_user.p7_bonus = user['players'][6]['bonus']
    new_user.p7_bps = user['players'][6]['bps']
    new_user.p7_influence = user['players'][6]['influence']
    new_user.p7_creativity = user['players'][6]['creativity']
    new_user.p7_threat = user['players'][6]['threat']
    new_user.p7_ict_index = user['players'][6]['ict_index']
    new_user.p7_influence_rank = user['players'][6]['influence_rank']
    new_user.p7_influence_rank_type = user['players'][6]['influence_rank_type']
    new_user.p7_creativity_rank = user['players'][6]['creativity_rank']
    new_user.p7_creativity_rank_type = user['players'][6]['creativity_rank_type']
    new_user.p7_threat_rank = user['players'][6]['threat_rank']
    new_user.p7_threat_rank_type = user['players'][6]['threat_rank_type']
    # player 8
    new_user.p8_chance_of_playing_next_round = user['players'][7]['chance_of_playing_next_round']
    new_user.p8_chance_of_playing_this_round = user['players'][7]['chance_of_playing_this_round']
    new_user.p8_code = user['players'][7]['code']
    new_user.p8_cost_change_event = user['players'][7]['cost_change_event']
    new_user.p8_cost_change_event_fall = user['players'][7]['cost_change_event_fall']
    new_user.p8_cost_change_start = user['players'][7]['cost_change_start']
    new_user.p8_cost_change_start_fall = user['players'][7]['cost_change_start_fall']
    new_user.p8_dreamteam_count = user['players'][7]['dreamteam_count']
    new_user.p8_element_type = user['players'][7]['element_type']
    new_user.p8_ep_next = user['players'][7]['ep_next']
    new_user.p8_ep_this = user['players'][7]['ep_this']
    new_user.p8_event_points = user['players'][7]['event_points']
    new_user.p8_first_name = user['players'][7]['first_name']
    new_user.p8_form = user['players'][7]['form']
    new_user.p8_player_id = user['players'][7]['id']
    new_user.p8_in_dreamteam = user['players'][7]['in_dreamteam']
    new_user.p8_news = user['players'][7]['news']
    new_user.p8_news_added = user['players'][7]['news_added']
    new_user.p8_now_cost = user['players'][7]['now_cost']
    new_user.p8_photo = user['players'][7]['photo']
    new_user.p8_points_per_game = user['players'][7]['points_per_game']
    new_user.p8_second_name = user['players'][7]['second_name']
    new_user.p8_selected_by_percent = user['players'][7]['selected_by_percent']
    new_user.p8_special = user['players'][7]['special']
    new_user.p8_squad_number = user['players'][7]['squad_number']
    new_user.p8_status = user['players'][7]['status']
    new_user.p8_team = user['players'][7]['team']
    new_user.p8_team_code = user['players'][7]['team_code']
    new_user.p8_total_points = user['players'][7]['total_points']
    new_user.p8_transfers_in = user['players'][7]['transfers_in']
    new_user.p8_transfers_in_event = user['players'][7]['transfers_in_event']
    new_user.p8_transfers_out = user['players'][7]['transfers_out']
    new_user.p8_transfers_out_event = user['players'][7]['transfers_out_event']
    new_user.p8_value_form = user['players'][7]['value_form']
    new_user.p8_value_season = user['players'][7]['value_season']
    new_user.p8_web_name = user['players'][7]['web_name']
    new_user.p8_minutes = user['players'][7]['minutes']
    new_user.p8_goals_scored = user['players'][7]['goals_scored']
    new_user.p8_assists = user['players'][7]['assists']
    new_user.p8_clean_sheets = user['players'][7]['clean_sheets']
    new_user.p8_own_goals = user['players'][7]['own_goals']
    new_user.p8_penalties_saved = user['players'][7]['penalties_saved']
    new_user.p8_yellow_cards = user['players'][7]['yellow_cards']
    new_user.p8_red_cards = user['players'][7]['red_cards']
    new_user.p8_saves = user['players'][7]['saves']
    new_user.p8_bonus = user['players'][7]['bonus']
    new_user.p8_bps = user['players'][7]['bps']
    new_user.p8_influence = user['players'][7]['influence']
    new_user.p8_creativity = user['players'][7]['creativity']
    new_user.p8_threat = user['players'][7]['threat']
    new_user.p8_ict_index = user['players'][7]['ict_index']
    new_user.p8_influence_rank = user['players'][7]['influence_rank']
    new_user.p8_influence_rank_type = user['players'][7]['influence_rank_type']
    new_user.p8_creativity_rank = user['players'][7]['creativity_rank']
    new_user.p8_creativity_rank_type = user['players'][7]['creativity_rank_type']
    new_user.p8_threat_rank = user['players'][7]['threat_rank']
    new_user.p8_threat_rank_type = user['players'][7]['threat_rank_type']
    # player 9
    new_user.p9_chance_of_playing_next_round = user['players'][8]['chance_of_playing_next_round']
    new_user.p9_chance_of_playing_this_round = user['players'][8]['chance_of_playing_this_round']
    new_user.p9_code = user['players'][8]['code']
    new_user.p9_cost_change_event = user['players'][8]['cost_change_event']
    new_user.p9_cost_change_event_fall = user['players'][8]['cost_change_event_fall']
    new_user.p9_cost_change_start = user['players'][8]['cost_change_start']
    new_user.p9_cost_change_start_fall = user['players'][8]['cost_change_start_fall']
    new_user.p9_dreamteam_count = user['players'][8]['dreamteam_count']
    new_user.p9_element_type = user['players'][8]['element_type']
    new_user.p9_ep_next = user['players'][8]['ep_next']
    new_user.p9_ep_this = user['players'][8]['ep_this']
    new_user.p9_event_points = user['players'][8]['event_points']
    new_user.p9_first_name = user['players'][8]['first_name']
    new_user.p9_form = user['players'][8]['form']
    new_user.p9_player_id = user['players'][8]['id']
    new_user.p9_in_dreamteam = user['players'][8]['in_dreamteam']
    new_user.p9_news = user['players'][8]['news']
    new_user.p9_news_added = user['players'][8]['news_added']
    new_user.p9_now_cost = user['players'][8]['now_cost']
    new_user.p9_photo = user['players'][8]['photo']
    new_user.p9_points_per_game = user['players'][8]['points_per_game']
    new_user.p9_second_name = user['players'][8]['second_name']
    new_user.p9_selected_by_percent = user['players'][8]['selected_by_percent']
    new_user.p9_special = user['players'][8]['special']
    new_user.p9_squad_number = user['players'][8]['squad_number']
    new_user.p9_status = user['players'][8]['status']
    new_user.p9_team = user['players'][8]['team']
    new_user.p9_team_code = user['players'][8]['team_code']
    new_user.p9_total_points = user['players'][8]['total_points']
    new_user.p9_transfers_in = user['players'][8]['transfers_in']
    new_user.p9_transfers_in_event = user['players'][8]['transfers_in_event']
    new_user.p9_transfers_out = user['players'][8]['transfers_out']
    new_user.p9_transfers_out_event = user['players'][8]['transfers_out_event']
    new_user.p9_value_form = user['players'][8]['value_form']
    new_user.p9_value_season = user['players'][8]['value_season']
    new_user.p9_web_name = user['players'][8]['web_name']
    new_user.p9_minutes = user['players'][8]['minutes']
    new_user.p9_goals_scored = user['players'][8]['goals_scored']
    new_user.p9_assists = user['players'][8]['assists']
    new_user.p9_clean_sheets = user['players'][8]['clean_sheets']
    new_user.p9_own_goals = user['players'][8]['own_goals']
    new_user.p9_penalties_saved = user['players'][8]['penalties_saved']
    new_user.p9_yellow_cards = user['players'][8]['yellow_cards']
    new_user.p9_red_cards = user['players'][8]['red_cards']
    new_user.p9_saves = user['players'][8]['saves']
    new_user.p9_bonus = user['players'][8]['bonus']
    new_user.p9_bps = user['players'][8]['bps']
    new_user.p9_influence = user['players'][8]['influence']
    new_user.p9_creativity = user['players'][8]['creativity']
    new_user.p9_threat = user['players'][8]['threat']
    new_user.p9_ict_index = user['players'][8]['ict_index']
    new_user.p9_influence_rank = user['players'][8]['influence_rank']
    new_user.p9_influence_rank_type = user['players'][8]['influence_rank_type']
    new_user.p9_creativity_rank = user['players'][8]['creativity_rank']
    new_user.p9_creativity_rank_type = user['players'][8]['creativity_rank_type']
    new_user.p9_threat_rank = user['players'][8]['threat_rank']
    new_user.p9_threat_rank_type = user['players'][8]['threat_rank_type']

    # player 10
    new_user.p10_chance_of_playing_next_round = user['players'][9]['chance_of_playing_next_round']
    new_user.p10_chance_of_playing_this_round = user['players'][9]['chance_of_playing_this_round']
    new_user.p10_code = user['players'][9]['code']
    new_user.p10_cost_change_event = user['players'][9]['cost_change_event']
    new_user.p10_cost_change_event_fall = user['players'][9]['cost_change_event_fall']
    new_user.p10_cost_change_start = user['players'][9]['cost_change_start']
    new_user.p10_cost_change_start_fall = user['players'][9]['cost_change_start_fall']
    new_user.p10_dreamteam_count = user['players'][9]['dreamteam_count']
    new_user.p10_element_type = user['players'][9]['element_type']
    new_user.p10_ep_next = user['players'][9]['ep_next']
    new_user.p10_ep_this = user['players'][9]['ep_this']
    new_user.p10_event_points = user['players'][9]['event_points']
    new_user.p10_first_name = user['players'][9]['first_name']
    new_user.p10_form = user['players'][9]['form']
    new_user.p10_player_id = user['players'][9]['id']
    new_user.p10_in_dreamteam = user['players'][9]['in_dreamteam']
    new_user.p10_news = user['players'][9]['news']
    new_user.p10_news_added = user['players'][9]['news_added']
    new_user.p10_now_cost = user['players'][9]['now_cost']
    new_user.p10_photo = user['players'][9]['photo']
    new_user.p10_points_per_game = user['players'][9]['points_per_game']
    new_user.p10_second_name = user['players'][9]['second_name']
    new_user.p10_selected_by_percent = user['players'][9]['selected_by_percent']
    new_user.p10_special = user['players'][9]['special']
    new_user.p10_squad_number = user['players'][9]['squad_number']
    new_user.p10_status = user['players'][9]['status']
    new_user.p10_team = user['players'][9]['team']
    new_user.p10_team_code = user['players'][9]['team_code']
    new_user.p10_total_points = user['players'][9]['total_points']
    new_user.p10_transfers_in = user['players'][9]['transfers_in']
    new_user.p10_transfers_in_event = user['players'][9]['transfers_in_event']
    new_user.p10_transfers_out = user['players'][9]['transfers_out']
    new_user.p10_transfers_out_event = user['players'][9]['transfers_out_event']
    new_user.p10_value_form = user['players'][9]['value_form']
    new_user.p10_value_season = user['players'][9]['value_season']
    new_user.p10_web_name = user['players'][9]['web_name']
    new_user.p10_minutes = user['players'][9]['minutes']
    new_user.p10_goals_scored = user['players'][9]['goals_scored']
    new_user.p10_assists = user['players'][9]['assists']
    new_user.p10_clean_sheets = user['players'][9]['clean_sheets']
    new_user.p10_own_goals = user['players'][9]['own_goals']
    new_user.p10_penalties_saved = user['players'][9]['penalties_saved']
    new_user.p10_yellow_cards = user['players'][9]['yellow_cards']
    new_user.p10_red_cards = user['players'][9]['red_cards']
    new_user.p10_saves = user['players'][9]['saves']
    new_user.p10_bonus = user['players'][9]['bonus']
    new_user.p10_bps = user['players'][9]['bps']
    new_user.p10_influence = user['players'][9]['influence']
    new_user.p10_creativity = user['players'][9]['creativity']
    new_user.p10_threat = user['players'][9]['threat']
    new_user.p10_ict_index = user['players'][9]['ict_index']
    new_user.p10_influence_rank = user['players'][9]['influence_rank']
    new_user.p10_influence_rank_type = user['players'][9]['influence_rank_type']
    new_user.p10_creativity_rank = user['players'][9]['creativity_rank']
    new_user.p10_creativity_rank_type = user['players'][9]['creativity_rank_type']
    new_user.p10_threat_rank = user['players'][9]['threat_rank']
    new_user.p10_threat_rank_type = user['players'][9]['threat_rank_type']

    # player 11
    new_user.p11_chance_of_playing_next_round = user['players'][10]['chance_of_playing_next_round']
    new_user.p11_chance_of_playing_this_round = user['players'][10]['chance_of_playing_this_round']
    new_user.p11_code = user['players'][10]['code']
    new_user.p11_cost_change_event = user['players'][10]['cost_change_event']
    new_user.p11_cost_change_event_fall = user['players'][10]['cost_change_event_fall']
    new_user.p11_cost_change_start = user['players'][10]['cost_change_start']
    new_user.p1_cost_change_start_fall = user['players'][10]['cost_change_start_fall']
    new_user.p11_dreamteam_count = user['players'][10]['dreamteam_count']
    new_user.p11_element_type = user['players'][10]['element_type']
    new_user.p11_ep_next = user['players'][10]['ep_next']
    new_user.p11_ep_this = user['players'][10]['ep_this']
    new_user.p1_event_points = user['players'][10]['event_points']
    new_user.p11_first_name = user['players'][10]['first_name']
    new_user.p11_form = user['players'][10]['form']
    new_user.p11_player_id = user['players'][10]['id']
    new_user.p11_in_dreamteam = user['players'][10]['in_dreamteam']
    new_user.p11_news = user['players'][10]['news']
    new_user.p11_news_added = user['players'][10]['news_added']
    new_user.p11_now_cost = user['players'][10]['now_cost']
    new_user.p11_photo = user['players'][10]['photo']
    new_user.p11_points_per_game = user['players'][10]['points_per_game']
    new_user.p11_second_name = user['players'][10]['second_name']
    new_user.p11_selected_by_percent = user['players'][10]['selected_by_percent']
    new_user.p11_special = user['players'][10]['special']
    new_user.p11_squad_number = user['players'][10]['squad_number']
    new_user.p11_status = user['players'][10]['status']
    new_user.p11_team = user['players'][10]['team']
    new_user.p11_team_code = user['players'][10]['team_code']
    new_user.p11_total_points = user['players'][10]['total_points']
    new_user.p11_transfers_in = user['players'][10]['transfers_in']
    new_user.p11_transfers_in_event = user['players'][10]['transfers_in_event']
    new_user.p11_transfers_out = user['players'][10]['transfers_out']
    new_user.p11_transfers_out_event = user['players'][10]['transfers_out_event']
    new_user.p11_value_form = user['players'][10]['value_form']
    new_user.p11_value_season = user['players'][10]['value_season']
    new_user.p11_web_name = user['players'][10]['web_name']
    new_user.p11_minutes = user['players'][10]['minutes']
    new_user.p11_goals_scored = user['players'][10]['goals_scored']
    new_user.p11_assists = user['players'][10]['assists']
    new_user.p11_clean_sheets = user['players'][10]['clean_sheets']
    new_user.p11_own_goals = user['players'][10]['own_goals']
    new_user.p11_penalties_saved = user['players'][10]['penalties_saved']
    new_user.p11_yellow_cards = user['players'][10]['yellow_cards']
    new_user.p11_red_cards = user['players'][10]['red_cards']
    new_user.p11_saves = user['players'][10]['saves']
    new_user.p11_bonus = user['players'][10]['bonus']
    new_user.p11_bps = user['players'][10]['bps']
    new_user.p11_influence = user['players'][10]['influence']
    new_user.p11_creativity = user['players'][10]['creativity']
    new_user.p11_threat = user['players'][10]['threat']
    new_user.p11_ict_index = user['players'][10]['ict_index']
    new_user.p11_influence_rank = user['players'][10]['influence_rank']
    new_user.p11_influence_rank_type = user['players'][10]['influence_rank_type']
    new_user.p11_creativity_rank = user['players'][10]['creativity_rank']
    new_user.p11_creativity_rank_type = user['players'][10]['creativity_rank_type']
    new_user.p11_threat_rank = user['players'][10]['threat_rank']
    new_user.p11_threat_rank_type = user['players'][10]['threat_rank_type']

    # player 12
    new_user.p12_chance_of_playing_next_round = user['players'][11]['chance_of_playing_next_round']
    new_user.p12_chance_of_playing_this_round = user['players'][11]['chance_of_playing_this_round']
    new_user.p12_code = user['players'][11]['code']
    new_user.p12_cost_change_event = user['players'][11]['cost_change_event']
    new_user.p12_cost_change_event_fall = user['players'][11]['cost_change_event_fall']
    new_user.p12_cost_change_start = user['players'][11]['cost_change_start']
    new_user.p12_cost_change_start_fall = user['players'][11]['cost_change_start_fall']
    new_user.p12_dreamteam_count = user['players'][11]['dreamteam_count']
    new_user.p12_element_type = user['players'][11]['element_type']
    new_user.p12_ep_next = user['players'][11]['ep_next']
    new_user.p12_ep_this = user['players'][11]['ep_this']
    new_user.p12_event_points = user['players'][11]['event_points']
    new_user.p12_first_name = user['players'][11]['first_name']
    new_user.p12_form = user['players'][11]['form']
    new_user.p12_player_id = user['players'][11]['id']
    new_user.p12_in_dreamteam = user['players'][11]['in_dreamteam']
    new_user.p12_news = user['players'][11]['news']
    new_user.p12_news_added = user['players'][11]['news_added']
    new_user.p12_now_cost = user['players'][11]['now_cost']
    new_user.p12_photo = user['players'][11]['photo']
    new_user.p12_points_per_game = user['players'][11]['points_per_game']
    new_user.p12_second_name = user['players'][11]['second_name']
    new_user.p12_selected_by_percent = user['players'][11]['selected_by_percent']
    new_user.p12_special = user['players'][11]['special']
    new_user.p12_squad_number = user['players'][11]['squad_number']
    new_user.p12_status = user['players'][11]['status']
    new_user.p12_team = user['players'][11]['team']
    new_user.p12_team_code = user['players'][11]['team_code']
    new_user.p12_total_points = user['players'][11]['total_points']
    new_user.p12_transfers_in = user['players'][11]['transfers_in']
    new_user.p12_transfers_in_event = user['players'][11]['transfers_in_event']
    new_user.p12_transfers_out = user['players'][11]['transfers_out']
    new_user.p12_transfers_out_event = user['players'][11]['transfers_out_event']
    new_user.p12_value_form = user['players'][11]['value_form']
    new_user.p12_value_season = user['players'][11]['value_season']
    new_user.p12_web_name = user['players'][11]['web_name']
    new_user.p12_minutes = user['players'][11]['minutes']
    new_user.p12_goals_scored = user['players'][11]['goals_scored']
    new_user.p12_assists = user['players'][11]['assists']
    new_user.p12_clean_sheets = user['players'][11]['clean_sheets']
    new_user.p12_own_goals = user['players'][11]['own_goals']
    new_user.p12_penalties_saved = user['players'][11]['penalties_saved']
    new_user.p12_yellow_cards = user['players'][11]['yellow_cards']
    new_user.p12_red_cards = user['players'][11]['red_cards']
    new_user.p12_saves = user['players'][11]['saves']
    new_user.p12_bonus = user['players'][11]['bonus']
    new_user.p12_bps = user['players'][11]['bps']
    new_user.p12_influence = user['players'][11]['influence']
    new_user.p12_creativity = user['players'][11]['creativity']
    new_user.p12_threat = user['players'][11]['threat']
    new_user.p12_ict_index = user['players'][11]['ict_index']
    new_user.p12_influence_rank = user['players'][11]['influence_rank']
    new_user.p12_influence_rank_type = user['players'][11]['influence_rank_type']
    new_user.p12_creativity_rank = user['players'][11]['creativity_rank']
    new_user.p12_creativity_rank_type = user['players'][11]['creativity_rank_type']
    new_user.p12_threat_rank = user['players'][11]['threat_rank']
    new_user.p12_threat_rank_type = user['players'][11]['threat_rank_type']

    # player 13
    new_user.p13_chance_of_playing_next_round = user['players'][12]['chance_of_playing_next_round']
    new_user.p13_chance_of_playing_this_round = user['players'][12]['chance_of_playing_this_round']
    new_user.p13_code = user['players'][12]['code']
    new_user.p13_cost_change_event = user['players'][12]['cost_change_event']
    new_user.p13_cost_change_event_fall = user['players'][12]['cost_change_event_fall']
    new_user.p13_cost_change_start = user['players'][12]['cost_change_start']
    new_user.p13_cost_change_start_fall = user['players'][12]['cost_change_start_fall']
    new_user.p13_dreamteam_count = user['players'][12]['dreamteam_count']
    new_user.p13_element_type = user['players'][12]['element_type']
    new_user.p13_ep_next = user['players'][12]['ep_next']
    new_user.p13_ep_this = user['players'][12]['ep_this']
    new_user.p13_event_points = user['players'][12]['event_points']
    new_user.p13_first_name = user['players'][12]['first_name']
    new_user.p13_form = user['players'][12]['form']
    new_user.p13_player_id = user['players'][12]['id']
    new_user.p13_in_dreamteam = user['players'][12]['in_dreamteam']
    new_user.p13_news = user['players'][12]['news']
    new_user.p13_news_added = user['players'][12]['news_added']
    new_user.p13_now_cost = user['players'][12]['now_cost']
    new_user.p13_photo = user['players'][12]['photo']
    new_user.p13_points_per_game = user['players'][12]['points_per_game']
    new_user.p13_second_name = user['players'][12]['second_name']
    new_user.p13_selected_by_percent = user['players'][12]['selected_by_percent']
    new_user.p13_special = user['players'][12]['special']
    new_user.p13_squad_number = user['players'][12]['squad_number']
    new_user.p13_status = user['players'][12]['status']
    new_user.p13_team = user['players'][12]['team']
    new_user.p13_team_code = user['players'][12]['team_code']
    new_user.p13_total_points = user['players'][12]['total_points']
    new_user.p13_transfers_in = user['players'][12]['transfers_in']
    new_user.p13_transfers_in_event = user['players'][12]['transfers_in_event']
    new_user.p13_transfers_out = user['players'][12]['transfers_out']
    new_user.p13_transfers_out_event = user['players'][12]['transfers_out_event']
    new_user.p13_value_form = user['players'][12]['value_form']
    new_user.p13_value_season = user['players'][12]['value_season']
    new_user.p13_web_name = user['players'][12]['web_name']
    new_user.p13_minutes = user['players'][12]['minutes']
    new_user.p13_goals_scored = user['players'][12]['goals_scored']
    new_user.p13_assists = user['players'][12]['assists']
    new_user.p13_clean_sheets = user['players'][12]['clean_sheets']
    new_user.p13_own_goals = user['players'][12]['own_goals']
    new_user.p13_penalties_saved = user['players'][12]['penalties_saved']
    new_user.p13_yellow_cards = user['players'][12]['yellow_cards']
    new_user.p13_red_cards = user['players'][12]['red_cards']
    new_user.p13_saves = user['players'][12]['saves']
    new_user.p13_bonus = user['players'][12]['bonus']
    new_user.p13_bps = user['players'][12]['bps']
    new_user.p13_influence = user['players'][12]['influence']
    new_user.p13_creativity = user['players'][12]['creativity']
    new_user.p13_threat = user['players'][12]['threat']
    new_user.p13_ict_index = user['players'][12]['ict_index']
    new_user.p13_influence_rank = user['players'][12]['influence_rank']
    new_user.p13_influence_rank_type = user['players'][12]['influence_rank_type']
    new_user.p13_creativity_rank = user['players'][12]['creativity_rank']
    new_user.p13_creativity_rank_type = user['players'][12]['creativity_rank_type']
    new_user.p13_threat_rank = user['players'][12]['threat_rank']
    new_user.p13_threat_rank_type = user['players'][12]['threat_rank_type']

    # player 14
    new_user.p14_chance_of_playing_next_round = user['players'][13]['chance_of_playing_next_round']
    new_user.p14_chance_of_playing_this_round = user['players'][13]['chance_of_playing_this_round']
    new_user.p14_code = user['players'][13]['code']
    new_user.p14_cost_change_event = user['players'][13]['cost_change_event']
    new_user.p14_cost_change_event_fall = user['players'][13]['cost_change_event_fall']
    new_user.p14_cost_change_start = user['players'][13]['cost_change_start']
    new_user.p14_cost_change_start_fall = user['players'][13]['cost_change_start_fall']
    new_user.p14_dreamteam_count = user['players'][13]['dreamteam_count']
    new_user.p14_element_type = user['players'][13]['element_type']
    new_user.p14_ep_next = user['players'][13]['ep_next']
    new_user.p14_ep_this = user['players'][13]['ep_this']
    new_user.p14_event_points = user['players'][13]['event_points']
    new_user.p14_first_name = user['players'][13]['first_name']
    new_user.p14_form = user['players'][13]['form']
    new_user.p14_player_id = user['players'][13]['id']
    new_user.p14_in_dreamteam = user['players'][13]['in_dreamteam']
    new_user.p14_news = user['players'][13]['news']
    new_user.p14_news_added = user['players'][13]['news_added']
    new_user.p14_now_cost = user['players'][13]['now_cost']
    new_user.p14_photo = user['players'][13]['photo']
    new_user.p14_points_per_game = user['players'][13]['points_per_game']
    new_user.p14_second_name = user['players'][13]['second_name']
    new_user.p14_selected_by_percent = user['players'][13]['selected_by_percent']
    new_user.p14_special = user['players'][13]['special']
    new_user.p14_squad_number = user['players'][13]['squad_number']
    new_user.p14_status = user['players'][13]['status']
    new_user.p14_team = user['players'][13]['team']
    new_user.p14_team_code = user['players'][13]['team_code']
    new_user.p14_total_points = user['players'][13]['total_points']
    new_user.p14_transfers_in = user['players'][13]['transfers_in']
    new_user.p14_transfers_in_event = user['players'][13]['transfers_in_event']
    new_user.p14_transfers_out = user['players'][13]['transfers_out']
    new_user.p14_transfers_out_event = user['players'][13]['transfers_out_event']
    new_user.p14_value_form = user['players'][13]['value_form']
    new_user.p14_value_season = user['players'][13]['value_season']
    new_user.p14_web_name = user['players'][13]['web_name']
    new_user.p14_minutes = user['players'][13]['minutes']
    new_user.p14_goals_scored = user['players'][13]['goals_scored']
    new_user.p14_assists = user['players'][13]['assists']
    new_user.p14_clean_sheets = user['players'][13]['clean_sheets']
    new_user.p14_own_goals = user['players'][13]['own_goals']
    new_user.p14_penalties_saved = user['players'][13]['penalties_saved']
    new_user.p14_yellow_cards = user['players'][13]['yellow_cards']
    new_user.p14_red_cards = user['players'][13]['red_cards']
    new_user.p14_saves = user['players'][13]['saves']
    new_user.p14_bonus = user['players'][13]['bonus']
    new_user.p14_bps = user['players'][13]['bps']
    new_user.p14_influence = user['players'][13]['influence']
    new_user.p14_creativity = user['players'][13]['creativity']
    new_user.p14_threat = user['players'][13]['threat']
    new_user.p14_ict_index = user['players'][13]['ict_index']
    new_user.p14_influence_rank = user['players'][13]['influence_rank']
    new_user.p14_influence_rank_type = user['players'][13]['influence_rank_type']
    new_user.p14_creativity_rank = user['players'][13]['creativity_rank']
    new_user.p14_creativity_rank_type = user['players'][13]['creativity_rank_type']
    new_user.p14_threat_rank = user['players'][13]['threat_rank']
    new_user.p14_threat_rank_type = user['players'][13]['threat_rank_type']

    # player 15
    new_user.p15_chance_of_playing_next_round = user['players'][14]['chance_of_playing_next_round']
    new_user.p15_chance_of_playing_this_round = user['players'][14]['chance_of_playing_this_round']
    new_user.p15_code = user['players'][14]['code']
    new_user.p15_cost_change_event = user['players'][14]['cost_change_event']
    new_user.p15_cost_change_event_fall = user['players'][14]['cost_change_event_fall']
    new_user.p15_cost_change_start = user['players'][14]['cost_change_start']
    new_user.p15_cost_change_start_fall = user['players'][14]['cost_change_start_fall']
    new_user.p15_dreamteam_count = user['players'][14]['dreamteam_count']
    new_user.p15_element_type = user['players'][14]['element_type']
    new_user.p15_ep_next = user['players'][14]['ep_next']
    new_user.p15_ep_this = user['players'][14]['ep_this']
    new_user.p15_event_points = user['players'][14]['event_points']
    new_user.p15_first_name = user['players'][14]['first_name']
    new_user.p15_form = user['players'][14]['form']
    new_user.p15_player_id = user['players'][14]['id']
    new_user.p15_in_dreamteam = user['players'][14]['in_dreamteam']
    new_user.p15_news = user['players'][14]['news']
    new_user.p15_news_added = user['players'][14]['news_added']
    new_user.p15_now_cost = user['players'][14]['now_cost']
    new_user.p15_photo = user['players'][14]['photo']
    new_user.p15_points_per_game = user['players'][14]['points_per_game']
    new_user.p15_second_name = user['players'][14]['second_name']
    new_user.p15_selected_by_percent = user['players'][14]['selected_by_percent']
    new_user.p15_special = user['players'][14]['special']
    new_user.p15_squad_number = user['players'][14]['squad_number']
    new_user.p15_status = user['players'][14]['status']
    new_user.p15_team = user['players'][14]['team']
    new_user.p15_team_code = user['players'][14]['team_code']
    new_user.p15_total_points = user['players'][14]['total_points']
    new_user.p15_transfers_in = user['players'][14]['transfers_in']
    new_user.p15_transfers_in_event = user['players'][14]['transfers_in_event']
    new_user.p15_transfers_out = user['players'][14]['transfers_out']
    new_user.p15_transfers_out_event = user['players'][14]['transfers_out_event']
    new_user.p15_value_form = user['players'][14]['value_form']
    new_user.p15_value_season = user['players'][14]['value_season']
    new_user.p15_web_name = user['players'][14]['web_name']
    new_user.p15_minutes = user['players'][14]['minutes']
    new_user.p15_goals_scored = user['players'][14]['goals_scored']
    new_user.p15_assists = user['players'][14]['assists']
    new_user.p15_clean_sheets = user['players'][14]['clean_sheets']
    new_user.p15_own_goals = user['players'][14]['own_goals']
    new_user.p15_penalties_saved = user['players'][14]['penalties_saved']
    new_user.p15_yellow_cards = user['players'][14]['yellow_cards']
    new_user.p15_red_cards = user['players'][14]['red_cards']
    new_user.p15_saves = user['players'][14]['saves']
    new_user.p15_bonus = user['players'][14]['bonus']
    new_user.p15_bps = user['players'][14]['bps']
    new_user.p15_influence = user['players'][14]['influence']
    new_user.p15_creativity = user['players'][14]['creativity']
    new_user.p15_threat = user['players'][14]['threat']
    new_user.p15_ict_index = user['players'][14]['ict_index']
    new_user.p15_influence_rank = user['players'][14]['influence_rank']
    new_user.p15_influence_rank_type = user['players'][14]['influence_rank_type']
    new_user.p15_creativity_rank = user['players'][14]['creativity_rank']
    new_user.p15_creativity_rank_type = user['players'][14]['creativity_rank_type']
    new_user.p15_threat_rank = user['players'][14]['threat_rank']
    new_user.p15_threat_rank_type = user['players'][14]['threat_rank_type']
    new_user.user_id = user_id

    db.session.add(new_user)
    db.session.commit()
    # session['user_id'] = user_id
    return redirect(f'/user/{user_id}')



# login and update user ########################################################
# login
@app.route('/logon', methods=['GET','POST'])
def login_user():
    form = LoginForm()
    if form.validate_on_submit():
        email = form.email.data
        password = form.password.data
        temp = form.password.data
        user = Users.authenticate(email, password)
        # update team
        if user:
            session['user_id'] = user.id
            make_user_profile(user.email, temp, user.team_id)
            return redirect(f'/user/update/{user.id}')
        else:
            form.email.errors = ['Invalid username/password.']
    return render_template('login.html', form=form)

# update user
@app.route('/user/update/<int:user_id>', methods=["GET","POST"])
def update_user(user_id):
    team = Team.query.get_or_404(user_id)
    team.team_name = user['team_name']
    team.fav_team = user['fav_team']
    team.fav_team_id = user['fav_team_id']
    team.fav_team_logo = user['fav_team_logo']
    team.fav_team_colors = user['fav_team_colors']
    team.fav_team_jersey = user['fav_team_jersey']
    team.fav_team_jersey_goal = user['fav_team_jersey_goal']
    team.classic_league_id = user['classic_league_id']
    team.overall_points = user['overall_points']
    team.gameweek_points = user['gameweek_points']
    team.classic_league_name = user['classic_league_name']
    team.classic_league_rank = user['classic_league_rank']
    team.classic_league_rank_previous = user['classic_league_rank_previous']

    # player 1
    team.p1_chance_of_playing_next_round = user['players'][0]['chance_of_playing_next_round']
    team.p1_chance_of_playing_this_round = user['players'][0]['chance_of_playing_this_round']
    team.p1_code = user['players'][0]['code']
    team.p1_cost_change_event = user['players'][0]['cost_change_event']
    team.p1_cost_change_event_fall = user['players'][0]['cost_change_event_fall']
    team.p1_cost_change_start = user['players'][0]['cost_change_start']
    team.p1_cost_change_start_fall = user['players'][0]['cost_change_start_fall']
    team.p1_dreamteam_count = user['players'][0]['dreamteam_count']
    team.p1_element_type = user['players'][0]['element_type']
    team.p1_ep_next = user['players'][0]['ep_next']
    team.p1_ep_this = user['players'][0]['ep_this']
    team.p1_event_points = user['players'][0]['event_points']
    team.p1_first_name = user['players'][0]['first_name']
    team.p1_form = user['players'][0]['form']
    team.p1_player_id = user['players'][0]['id']
    team.p1_in_dreamteam = user['players'][0]['in_dreamteam']
    team.p1_news = user['players'][0]['news']
    team.p1_news_added = user['players'][0]['news_added']
    team.p1_now_cost = user['players'][0]['now_cost']
    team.p1_photo = user['players'][0]['photo']
    team.p1_points_per_game = user['players'][0]['points_per_game']
    team.p1_second_name = user['players'][0]['second_name']
    team.p1_selected_by_percent = user['players'][0]['selected_by_percent']
    team.p1_special = user['players'][0]['special']
    team.p1_squad_number = user['players'][0]['squad_number']
    team.p1_status = user['players'][0]['status']
    team.p1_team = user['players'][0]['team']
    team.p1_team_code = user['players'][0]['team_code']
    team.p1_total_points = user['players'][0]['total_points']
    team.p1_transfers_in = user['players'][0]['transfers_in']
    team.p1_transfers_in_event = user['players'][0]['transfers_in_event']
    team.p1_transfers_out = user['players'][0]['transfers_out']
    team.p1_transfers_out_event = user['players'][0]['transfers_out_event']
    team.p1_value_form = user['players'][0]['value_form']
    team.p1_value_season = user['players'][0]['value_season']
    team.p1_web_name = user['players'][0]['web_name']
    team.p1_minutes = user['players'][0]['minutes']
    team.p1_goals_scored = user['players'][0]['goals_scored']
    team.p1_assists = user['players'][0]['assists']
    team.p1_clean_sheets = user['players'][0]['clean_sheets']
    team.p1_own_goals = user['players'][0]['own_goals']
    team.p1_penalties_saved = user['players'][0]['penalties_saved']
    team.p1_yellow_cards = user['players'][0]['yellow_cards']
    team.p1_red_cards = user['players'][0]['red_cards']
    team.p1_saves = user['players'][0]['saves']
    team.p1_bonus = user['players'][0]['bonus']
    team.p1_bps = user['players'][0]['bps']
    team.p1_influence = user['players'][0]['influence']
    team.p1_creativity = user['players'][0]['creativity']
    team.p1_threat = user['players'][0]['threat']
    team.p1_ict_index = user['players'][0]['ict_index']
    team.p1_influence_rank = user['players'][0]['influence_rank']
    team.p1_influence_rank_type = user['players'][0]['influence_rank_type']
    team.p1_creativity_rank = user['players'][0]['creativity_rank']
    team.p1_creativity_rank_type = user['players'][0]['creativity_rank_type']
    team.p1_threat_rank = user['players'][0]['threat_rank']
    team.p1_threat_rank_type = user['players'][0]['threat_rank_type']
    # player 2
    team.p2_chance_of_playing_next_round = user['players'][1]['chance_of_playing_next_round']
    team.p2_chance_of_playing_this_round = user['players'][1]['chance_of_playing_this_round']
    team.p2_code = user['players'][1]['code']
    team.p2_cost_change_event = user['players'][1]['cost_change_event']
    team.p2_cost_change_event_fall = user['players'][1]['cost_change_event_fall']
    team.p2_cost_change_start = user['players'][1]['cost_change_start']
    team.p2_cost_change_start_fall = user['players'][1]['cost_change_start_fall']
    team.p2_dreamteam_count = user['players'][1]['dreamteam_count']
    team.p2_element_type = user['players'][1]['element_type']
    team.p2_ep_next = user['players'][1]['ep_next']
    team.p2_ep_this = user['players'][1]['ep_this']
    team.p2_event_points = user['players'][1]['event_points']
    team.p2_first_name = user['players'][1]['first_name']
    team.p2_form = user['players'][1]['form']
    team.p2_player_id = user['players'][1]['id']
    team.p2_in_dreamteam = user['players'][1]['in_dreamteam']
    team.p2_news = user['players'][1]['news']
    team.p2_news_added = user['players'][1]['news_added']
    team.p2_now_cost = user['players'][1]['now_cost']
    team.p2_photo = user['players'][1]['photo']
    team.p2_points_per_game = user['players'][1]['points_per_game']
    team.p2_second_name = user['players'][1]['second_name']
    team.p2_selected_by_percent = user['players'][1]['selected_by_percent']
    team.p2_special = user['players'][1]['special']
    team.p2_squad_number = user['players'][1]['squad_number']
    team.p2_status = user['players'][1]['status']
    team.p2_team = user['players'][1]['team']
    team.p2_team_code = user['players'][1]['team_code']
    team.p2_total_points = user['players'][1]['total_points']
    team.p2_transfers_in = user['players'][1]['transfers_in']
    team.p2_transfers_in_event = user['players'][1]['transfers_in_event']
    team.p2_transfers_out = user['players'][1]['transfers_out']
    team.p2_transfers_out_event = user['players'][1]['transfers_out_event']
    team.p2_value_form = user['players'][1]['value_form']
    team.p2_value_season = user['players'][1]['value_season']
    team.p2_web_name = user['players'][1]['web_name']
    team.p2_minutes = user['players'][1]['minutes']
    team.p2_goals_scored = user['players'][1]['goals_scored']
    team.p2_assists = user['players'][1]['assists']
    team.p2_clean_sheets = user['players'][1]['clean_sheets']
    team.p2_own_goals = user['players'][1]['own_goals']
    team.p2_penalties_saved = user['players'][1]['penalties_saved']
    team.p2_yellow_cards = user['players'][1]['yellow_cards']
    team.p2_red_cards = user['players'][1]['red_cards']
    team.p2_saves = user['players'][1]['saves']
    team.p2_bonus = user['players'][1]['bonus']
    team.p2_bps = user['players'][1]['bps']
    team.p2_influence = user['players'][1]['influence']
    team.p2_creativity = user['players'][1]['creativity']
    team.p2_threat = user['players'][1]['threat']
    team.p2_ict_index = user['players'][1]['ict_index']
    team.p2_influence_rank = user['players'][1]['influence_rank']
    team.p2_influence_rank_type = user['players'][1]['influence_rank_type']
    team.p2_creativity_rank = user['players'][1]['creativity_rank']
    team.p2_creativity_rank_type = user['players'][1]['creativity_rank_type']
    team.p2_threat_rank = user['players'][1]['threat_rank']
    team.p2_threat_rank_type = user['players'][1]['threat_rank_type']
    # player 3
    team.p3_chance_of_playing_next_round = user['players'][2]['chance_of_playing_next_round']
    team.p3_chance_of_playing_this_round = user['players'][2]['chance_of_playing_this_round']
    team.p3_code = user['players'][2]['code']
    team.p3_cost_change_event = user['players'][2]['cost_change_event']
    team.p3_cost_change_event_fall = user['players'][2]['cost_change_event_fall']
    team.p3_cost_change_start = user['players'][2]['cost_change_start']
    team.p3_cost_change_start_fall = user['players'][2]['cost_change_start_fall']
    team.p3_dreamteam_count = user['players'][2]['dreamteam_count']
    team.p3_element_type = user['players'][2]['element_type']
    team.p3_ep_next = user['players'][2]['ep_next']
    team.p3_ep_this = user['players'][2]['ep_this']
    team.p3_event_points = user['players'][2]['event_points']
    team.p3_first_name = user['players'][2]['first_name']
    team.p3_form = user['players'][2]['form']
    team.p3_player_id = user['players'][2]['id']
    team.p3_in_dreamteam = user['players'][2]['in_dreamteam']
    team.p3_news = user['players'][2]['news']
    team.p3_news_added = user['players'][2]['news_added']
    team.p3_now_cost = user['players'][2]['now_cost']
    team.p3_photo = user['players'][2]['photo']
    team.p3_points_per_game = user['players'][2]['points_per_game']
    team.p3_second_name = user['players'][2]['second_name']
    team.p3_selected_by_percent = user['players'][2]['selected_by_percent']
    team.p3_special = user['players'][2]['special']
    team.p3_squad_number = user['players'][2]['squad_number']
    team.p3_status = user['players'][2]['status']
    team.p3_team = user['players'][2]['team']
    team.p3_team_code = user['players'][2]['team_code']
    team.p3_total_points = user['players'][2]['total_points']
    team.p3_transfers_in = user['players'][2]['transfers_in']
    team.p3_transfers_in_event = user['players'][2]['transfers_in_event']
    team.p3_transfers_out = user['players'][2]['transfers_out']
    team.p3_transfers_out_event = user['players'][2]['transfers_out_event']
    team.p3_value_form = user['players'][2]['value_form']
    team.p3_value_season = user['players'][2]['value_season']
    team.p3_web_name = user['players'][2]['web_name']
    team.p3_minutes = user['players'][2]['minutes']
    team.p3_goals_scored = user['players'][2]['goals_scored']
    team.p3_assists = user['players'][2]['assists']
    team.p3_clean_sheets = user['players'][2]['clean_sheets']
    team.p3_own_goals = user['players'][2]['own_goals']
    team.p3_penalties_saved = user['players'][2]['penalties_saved']
    team.p3_yellow_cards = user['players'][2]['yellow_cards']
    team.p3_red_cards = user['players'][2]['red_cards']
    team.p3_saves = user['players'][2]['saves']
    team.p3_bonus = user['players'][2]['bonus']
    team.p3_bps = user['players'][2]['bps']
    team.p3_influence = user['players'][2]['influence']
    team.p3_creativity = user['players'][2]['creativity']
    team.p3_threat = user['players'][2]['threat']
    team.p3_ict_index = user['players'][2]['ict_index']
    team.p3_influence_rank = user['players'][2]['influence_rank']
    team.p3_influence_rank_type = user['players'][2]['influence_rank_type']
    team.p3_creativity_rank = user['players'][2]['creativity_rank']
    team.p3_creativity_rank_type = user['players'][2]['creativity_rank_type']
    team.p3_threat_rank = user['players'][2]['threat_rank']
    team.p3_threat_rank_type = user['players'][2]['threat_rank_type']

    # player 4
    team.p4_chance_of_playing_next_round = user['players'][3]['chance_of_playing_next_round']
    team.p4_chance_of_playing_this_round = user['players'][3]['chance_of_playing_this_round']
    team.p4_code = user['players'][3]['code']
    team.p4_cost_change_event = user['players'][3]['cost_change_event']
    team.p4_cost_change_event_fall = user['players'][3]['cost_change_event_fall']
    team.p4_cost_change_start = user['players'][3]['cost_change_start']
    team.p4_cost_change_start_fall = user['players'][3]['cost_change_start_fall']
    team.p4_dreamteam_count = user['players'][3]['dreamteam_count']
    team.p4_element_type = user['players'][3]['element_type']
    team.p4_ep_next = user['players'][3]['ep_next']
    team.p4_ep_this = user['players'][3]['ep_this']
    team.p4_event_points = user['players'][3]['event_points']
    team.p4_first_name = user['players'][3]['first_name']
    team.p4_form = user['players'][3]['form']
    team.p4_player_id = user['players'][3]['id']
    team.p4_in_dreamteam = user['players'][3]['in_dreamteam']
    team.p4_news = user['players'][3]['news']
    team.p4_news_added = user['players'][3]['news_added']
    team.p4_now_cost = user['players'][3]['now_cost']
    team.p4_photo = user['players'][3]['photo']
    team.p4_points_per_game = user['players'][3]['points_per_game']
    team.p4_second_name = user['players'][3]['second_name']
    team.p4_selected_by_percent = user['players'][3]['selected_by_percent']
    team.p4_special = user['players'][3]['special']
    team.p4_squad_number = user['players'][3]['squad_number']
    team.p4_status = user['players'][3]['status']
    team.p4_team = user['players'][3]['team']
    team.p4_team_code = user['players'][3]['team_code']
    team.p4_total_points = user['players'][3]['total_points']
    team.p4_transfers_in = user['players'][3]['transfers_in']
    team.p4_transfers_in_event = user['players'][3]['transfers_in_event']
    team.p4_transfers_out = user['players'][3]['transfers_out']
    team.p4_transfers_out_event = user['players'][3]['transfers_out_event']
    team.p4_value_form = user['players'][3]['value_form']
    team.p4_value_season = user['players'][3]['value_season']
    team.p4_web_name = user['players'][3]['web_name']
    team.p4_minutes = user['players'][3]['minutes']
    team.p4_goals_scored = user['players'][3]['goals_scored']
    team.p4_assists = user['players'][3]['assists']
    team.p4_clean_sheets = user['players'][3]['clean_sheets']
    team.p4_own_goals = user['players'][3]['own_goals']
    team.p4_penalties_saved = user['players'][3]['penalties_saved']
    team.p4_yellow_cards = user['players'][3]['yellow_cards']
    team.p4_red_cards = user['players'][3]['red_cards']
    team.p4_saves = user['players'][3]['saves']
    team.p4_bonus = user['players'][3]['bonus']
    team.p4_bps = user['players'][3]['bps']
    team.p4_influence = user['players'][3]['influence']
    team.p4_creativity = user['players'][3]['creativity']
    team.p4_threat = user['players'][3]['threat']
    team.p4_ict_index = user['players'][3]['ict_index']
    team.p4_influence_rank = user['players'][3]['influence_rank']
    team.p4_influence_rank_type = user['players'][3]['influence_rank_type']
    team.p4_creativity_rank = user['players'][3]['creativity_rank']
    team.p4_creativity_rank_type = user['players'][3]['creativity_rank_type']
    team.p4_threat_rank = user['players'][3]['threat_rank']
    team.p4_threat_rank_type = user['players'][3]['threat_rank_type']

    # player 5
    team.p5_chance_of_playing_next_round = user['players'][4]['chance_of_playing_next_round']
    team.p5_chance_of_playing_this_round = user['players'][4]['chance_of_playing_this_round']
    team.p5_code = user['players'][4]['code']
    team.p5_cost_change_event = user['players'][4]['cost_change_event']
    team.p5_cost_change_event_fall = user['players'][4]['cost_change_event_fall']
    team.p5_cost_change_start = user['players'][4]['cost_change_start']
    team.p5_cost_change_start_fall = user['players'][4]['cost_change_start_fall']
    team.p5_dreamteam_count = user['players'][4]['dreamteam_count']
    team.p5_element_type = user['players'][4]['element_type']
    team.p5_ep_next = user['players'][4]['ep_next']
    team.p5_ep_this = user['players'][4]['ep_this']
    team.p5_event_points = user['players'][4]['event_points']
    team.p5_first_name = user['players'][4]['first_name']
    team.p5_form = user['players'][4]['form']
    team.p5_player_id = user['players'][4]['id']
    team.p5_in_dreamteam = user['players'][4]['in_dreamteam']
    team.p5_news = user['players'][4]['news']
    team.p5_news_added = user['players'][4]['news_added']
    team.p5_now_cost = user['players'][4]['now_cost']
    team.p5_photo = user['players'][4]['photo']
    team.p5_points_per_game = user['players'][4]['points_per_game']
    team.p5_second_name = user['players'][4]['second_name']
    team.p5_selected_by_percent = user['players'][4]['selected_by_percent']
    team.p5_special = user['players'][4]['special']
    team.p5_squad_number = user['players'][4]['squad_number']
    team.p5_status = user['players'][4]['status']
    team.p5_team = user['players'][4]['team']
    team.p5_team_code = user['players'][4]['team_code']
    team.p5_total_points = user['players'][4]['total_points']
    team.p5_transfers_in = user['players'][4]['transfers_in']
    team.p5_transfers_in_event = user['players'][4]['transfers_in_event']
    team.p5_transfers_out = user['players'][4]['transfers_out']
    team.p5_transfers_out_event = user['players'][4]['transfers_out_event']
    team.p5_value_form = user['players'][4]['value_form']
    team.p5_value_season = user['players'][4]['value_season']
    team.p5_web_name = user['players'][4]['web_name']
    team.p5_minutes = user['players'][4]['minutes']
    team.p5_goals_scored = user['players'][4]['goals_scored']
    team.p5_assists = user['players'][4]['assists']
    team.p5_clean_sheets = user['players'][4]['clean_sheets']
    team.p5_own_goals = user['players'][4]['own_goals']
    team.p5_penalties_saved = user['players'][4]['penalties_saved']
    team.p5_yellow_cards = user['players'][4]['yellow_cards']
    team.p5_red_cards = user['players'][4]['red_cards']
    team.p5_saves = user['players'][4]['saves']
    team.p5_bonus = user['players'][4]['bonus']
    team.p5_bps = user['players'][4]['bps']
    team.p5_influence = user['players'][4]['influence']
    team.p5_creativity = user['players'][4]['creativity']
    team.p5_threat = user['players'][4]['threat']
    team.p5_ict_index = user['players'][4]['ict_index']
    team.p5_influence_rank = user['players'][4]['influence_rank']
    team.p5_influence_rank_type = user['players'][4]['influence_rank_type']
    team.p5_creativity_rank = user['players'][4]['creativity_rank']
    team.p5_creativity_rank_type = user['players'][4]['creativity_rank_type']
    team.p5_threat_rank = user['players'][4]['threat_rank']
    team.p5_threat_rank_type = user['players'][4]['threat_rank_type']

    # player 6
    team.p6_chance_of_playing_next_round = user['players'][5]['chance_of_playing_next_round']
    team.p6_chance_of_playing_this_round = user['players'][5]['chance_of_playing_this_round']
    team.p6_code = user['players'][5]['code']
    team.p6_cost_change_event = user['players'][5]['cost_change_event']
    team.p6_cost_change_event_fall = user['players'][5]['cost_change_event_fall']
    team.p6_cost_change_start = user['players'][5]['cost_change_start']
    team.p6_cost_change_start_fall = user['players'][5]['cost_change_start_fall']
    team.p6_dreamteam_count = user['players'][5]['dreamteam_count']
    team.p6_element_type = user['players'][5]['element_type']
    team.p6_ep_next = user['players'][5]['ep_next']
    team.p6_ep_this = user['players'][5]['ep_this']
    team.p6_event_points = user['players'][5]['event_points']
    team.p6_first_name = user['players'][5]['first_name']
    team.p6_form = user['players'][5]['form']
    team.p6_player_id = user['players'][5]['id']
    team.p6_in_dreamteam = user['players'][5]['in_dreamteam']
    team.p6_news = user['players'][5]['news']
    team.p6_news_added = user['players'][5]['news_added']
    team.p6_now_cost = user['players'][5]['now_cost']
    team.p6_photo = user['players'][5]['photo']
    team.p6_points_per_game = user['players'][5]['points_per_game']
    team.p6_second_name = user['players'][5]['second_name']
    team.p6_selected_by_percent = user['players'][5]['selected_by_percent']
    team.p6_special = user['players'][5]['special']
    team.p6_squad_number = user['players'][5]['squad_number']
    team.p6_status = user['players'][5]['status']
    team.p6_team = user['players'][5]['team']
    team.p6_team_code = user['players'][5]['team_code']
    team.p6_total_points = user['players'][5]['total_points']
    team.p6_transfers_in = user['players'][5]['transfers_in']
    team.p6_transfers_in_event = user['players'][5]['transfers_in_event']
    team.p6_transfers_out = user['players'][5]['transfers_out']
    team.p6_transfers_out_event = user['players'][5]['transfers_out_event']
    team.p6_value_form = user['players'][5]['value_form']
    team.p6_value_season = user['players'][5]['value_season']
    team.p6_web_name = user['players'][5]['web_name']
    team.p6_minutes = user['players'][5]['minutes']
    team.p6_goals_scored = user['players'][5]['goals_scored']
    team.p6_assists = user['players'][5]['assists']
    team.p6_clean_sheets = user['players'][5]['clean_sheets']
    team.p6_own_goals = user['players'][5]['own_goals']
    team.p6_penalties_saved = user['players'][5]['penalties_saved']
    team.p6_yellow_cards = user['players'][5]['yellow_cards']
    team.p6_red_cards = user['players'][5]['red_cards']
    team.p6_saves = user['players'][5]['saves']
    team.p6_bonus = user['players'][5]['bonus']
    team.p6_bps = user['players'][5]['bps']
    team.p6_influence = user['players'][5]['influence']
    team.p6_creativity = user['players'][5]['creativity']
    team.p6_threat = user['players'][5]['threat']
    team.p6_ict_index = user['players'][5]['ict_index']
    team.p6_influence_rank = user['players'][5]['influence_rank']
    team.p6_influence_rank_type = user['players'][5]['influence_rank_type']
    team.p6_creativity_rank = user['players'][5]['creativity_rank']
    team.p6_creativity_rank_type = user['players'][5]['creativity_rank_type']
    team.p6_threat_rank = user['players'][5]['threat_rank']
    team.p6_threat_rank_type = user['players'][5]['threat_rank_type']

    # player 7
    team.p7_chance_of_playing_next_round = user['players'][6]['chance_of_playing_next_round']
    team.p7_chance_of_playing_this_round = user['players'][6]['chance_of_playing_this_round']
    team.p7_code = user['players'][6]['code']
    team.p7_cost_change_event = user['players'][6]['cost_change_event']
    team.p7_cost_change_event_fall = user['players'][6]['cost_change_event_fall']
    team.p7_cost_change_start = user['players'][6]['cost_change_start']
    team.p7_cost_change_start_fall = user['players'][6]['cost_change_start_fall']
    team.p7_dreamteam_count = user['players'][6]['dreamteam_count']
    team.p7_element_type = user['players'][6]['element_type']
    team.p7_ep_next = user['players'][6]['ep_next']
    team.p7_ep_this = user['players'][6]['ep_this']
    team.p7_event_points = user['players'][6]['event_points']
    team.p7_first_name = user['players'][6]['first_name']
    team.p7_form = user['players'][6]['form']
    team.p7_player_id = user['players'][6]['id']
    team.p7_in_dreamteam = user['players'][6]['in_dreamteam']
    team.p7_news = user['players'][6]['news']
    team.p7_news_added = user['players'][6]['news_added']
    team.p7_now_cost = user['players'][6]['now_cost']
    team.p7_photo = user['players'][6]['photo']
    team.p7_points_per_game = user['players'][6]['points_per_game']
    team.p7_second_name = user['players'][6]['second_name']
    team.p7_selected_by_percent = user['players'][6]['selected_by_percent']
    team.p7_special = user['players'][6]['special']
    team.p7_squad_number = user['players'][6]['squad_number']
    team.p7_status = user['players'][6]['status']
    team.p7_team = user['players'][6]['team']
    team.p7_team_code = user['players'][6]['team_code']
    team.p7_total_points = user['players'][6]['total_points']
    team.p7_transfers_in = user['players'][6]['transfers_in']
    team.p7_transfers_in_event = user['players'][6]['transfers_in_event']
    team.p7_transfers_out = user['players'][6]['transfers_out']
    team.p7_transfers_out_event = user['players'][6]['transfers_out_event']
    team.p7_value_form = user['players'][6]['value_form']
    team.p7_value_season = user['players'][6]['value_season']
    team.p7_web_name = user['players'][6]['web_name']
    team.p7_minutes = user['players'][6]['minutes']
    team.p7_goals_scored = user['players'][6]['goals_scored']
    team.p7_assists = user['players'][6]['assists']
    team.p7_clean_sheets = user['players'][6]['clean_sheets']
    team.p7_own_goals = user['players'][6]['own_goals']
    team.p7_penalties_saved = user['players'][6]['penalties_saved']
    team.p7_yellow_cards = user['players'][6]['yellow_cards']
    team.p7_red_cards = user['players'][6]['red_cards']
    team.p7_saves = user['players'][6]['saves']
    team.p7_bonus = user['players'][6]['bonus']
    team.p7_bps = user['players'][6]['bps']
    team.p7_influence = user['players'][6]['influence']
    team.p7_creativity = user['players'][6]['creativity']
    team.p7_threat = user['players'][6]['threat']
    team.p7_ict_index = user['players'][6]['ict_index']
    team.p7_influence_rank = user['players'][6]['influence_rank']
    team.p7_influence_rank_type = user['players'][6]['influence_rank_type']
    team.p7_creativity_rank = user['players'][6]['creativity_rank']
    team.p7_creativity_rank_type = user['players'][6]['creativity_rank_type']
    team.p7_threat_rank = user['players'][6]['threat_rank']
    team.p7_threat_rank_type = user['players'][6]['threat_rank_type']
    # player 8
    team.p8_chance_of_playing_next_round = user['players'][7]['chance_of_playing_next_round']
    team.p8_chance_of_playing_this_round = user['players'][7]['chance_of_playing_this_round']
    team.p8_code = user['players'][7]['code']
    team.p8_cost_change_event = user['players'][7]['cost_change_event']
    team.p8_cost_change_event_fall = user['players'][7]['cost_change_event_fall']
    team.p8_cost_change_start = user['players'][7]['cost_change_start']
    team.p8_cost_change_start_fall = user['players'][7]['cost_change_start_fall']
    team.p8_dreamteam_count = user['players'][7]['dreamteam_count']
    team.p8_element_type = user['players'][7]['element_type']
    team.p8_ep_next = user['players'][7]['ep_next']
    team.p8_ep_this = user['players'][7]['ep_this']
    team.p8_event_points = user['players'][7]['event_points']
    team.p8_first_name = user['players'][7]['first_name']
    team.p8_form = user['players'][7]['form']
    team.p8_player_id = user['players'][7]['id']
    team.p8_in_dreamteam = user['players'][7]['in_dreamteam']
    team.p8_news = user['players'][7]['news']
    team.p8_news_added = user['players'][7]['news_added']
    team.p8_now_cost = user['players'][7]['now_cost']
    team.p8_photo = user['players'][7]['photo']
    team.p8_points_per_game = user['players'][7]['points_per_game']
    team.p8_second_name = user['players'][7]['second_name']
    team.p8_selected_by_percent = user['players'][7]['selected_by_percent']
    team.p8_special = user['players'][7]['special']
    team.p8_squad_number = user['players'][7]['squad_number']
    team.p8_status = user['players'][7]['status']
    team.p8_team = user['players'][7]['team']
    team.p8_team_code = user['players'][7]['team_code']
    team.p8_total_points = user['players'][7]['total_points']
    team.p8_transfers_in = user['players'][7]['transfers_in']
    team.p8_transfers_in_event = user['players'][7]['transfers_in_event']
    team.p8_transfers_out = user['players'][7]['transfers_out']
    team.p8_transfers_out_event = user['players'][7]['transfers_out_event']
    team.p8_value_form = user['players'][7]['value_form']
    team.p8_value_season = user['players'][7]['value_season']
    team.p8_web_name = user['players'][7]['web_name']
    team.p8_minutes = user['players'][7]['minutes']
    team.p8_goals_scored = user['players'][7]['goals_scored']
    team.p8_assists = user['players'][7]['assists']
    team.p8_clean_sheets = user['players'][7]['clean_sheets']
    team.p8_own_goals = user['players'][7]['own_goals']
    team.p8_penalties_saved = user['players'][7]['penalties_saved']
    team.p8_yellow_cards = user['players'][7]['yellow_cards']
    team.p8_red_cards = user['players'][7]['red_cards']
    team.p8_saves = user['players'][7]['saves']
    team.p8_bonus = user['players'][7]['bonus']
    team.p8_bps = user['players'][7]['bps']
    team.p8_influence = user['players'][7]['influence']
    team.p8_creativity = user['players'][7]['creativity']
    team.p8_threat = user['players'][7]['threat']
    team.p8_ict_index = user['players'][7]['ict_index']
    team.p8_influence_rank = user['players'][7]['influence_rank']
    team.p8_influence_rank_type = user['players'][7]['influence_rank_type']
    team.p8_creativity_rank = user['players'][7]['creativity_rank']
    team.p8_creativity_rank_type = user['players'][7]['creativity_rank_type']
    team.p8_threat_rank = user['players'][7]['threat_rank']
    team.p8_threat_rank_type = user['players'][7]['threat_rank_type']
    # player 9
    team.p9_chance_of_playing_next_round = user['players'][8]['chance_of_playing_next_round']
    team.p9_chance_of_playing_this_round = user['players'][8]['chance_of_playing_this_round']
    team.p9_code = user['players'][8]['code']
    team.p9_cost_change_event = user['players'][8]['cost_change_event']
    team.p9_cost_change_event_fall = user['players'][8]['cost_change_event_fall']
    team.p9_cost_change_start = user['players'][8]['cost_change_start']
    team.p9_cost_change_start_fall = user['players'][8]['cost_change_start_fall']
    team.p9_dreamteam_count = user['players'][8]['dreamteam_count']
    team.p9_element_type = user['players'][8]['element_type']
    team.p9_ep_next = user['players'][8]['ep_next']
    team.p9_ep_this = user['players'][8]['ep_this']
    team.p9_event_points = user['players'][8]['event_points']
    team.p9_first_name = user['players'][8]['first_name']
    team.p9_form = user['players'][8]['form']
    team.p9_player_id = user['players'][8]['id']
    team.p9_in_dreamteam = user['players'][8]['in_dreamteam']
    team.p9_news = user['players'][8]['news']
    team.p9_news_added = user['players'][8]['news_added']
    team.p9_now_cost = user['players'][8]['now_cost']
    team.p9_photo = user['players'][8]['photo']
    team.p9_points_per_game = user['players'][8]['points_per_game']
    team.p9_second_name = user['players'][8]['second_name']
    team.p9_selected_by_percent = user['players'][8]['selected_by_percent']
    team.p9_special = user['players'][8]['special']
    team.p9_squad_number = user['players'][8]['squad_number']
    team.p9_status = user['players'][8]['status']
    team.p9_team = user['players'][8]['team']
    team.p9_team_code = user['players'][8]['team_code']
    team.p9_total_points = user['players'][8]['total_points']
    team.p9_transfers_in = user['players'][8]['transfers_in']
    team.p9_transfers_in_event = user['players'][8]['transfers_in_event']
    team.p9_transfers_out = user['players'][8]['transfers_out']
    team.p9_transfers_out_event = user['players'][8]['transfers_out_event']
    team.p9_value_form = user['players'][8]['value_form']
    team.p9_value_season = user['players'][8]['value_season']
    team.p9_web_name = user['players'][8]['web_name']
    team.p9_minutes = user['players'][8]['minutes']
    team.p9_goals_scored = user['players'][8]['goals_scored']
    team.p9_assists = user['players'][8]['assists']
    team.p9_clean_sheets = user['players'][8]['clean_sheets']
    team.p9_own_goals = user['players'][8]['own_goals']
    team.p9_penalties_saved = user['players'][8]['penalties_saved']
    team.p9_yellow_cards = user['players'][8]['yellow_cards']
    team.p9_red_cards = user['players'][8]['red_cards']
    team.p9_saves = user['players'][8]['saves']
    team.p9_bonus = user['players'][8]['bonus']
    team.p9_bps = user['players'][8]['bps']
    team.p9_influence = user['players'][8]['influence']
    team.p9_creativity = user['players'][8]['creativity']
    team.p9_threat = user['players'][8]['threat']
    team.p9_ict_index = user['players'][8]['ict_index']
    team.p9_influence_rank = user['players'][8]['influence_rank']
    team.p9_influence_rank_type = user['players'][8]['influence_rank_type']
    team.p9_creativity_rank = user['players'][8]['creativity_rank']
    team.p9_creativity_rank_type = user['players'][8]['creativity_rank_type']
    team.p9_threat_rank = user['players'][8]['threat_rank']
    team.p9_threat_rank_type = user['players'][8]['threat_rank_type']

    # player 10
    team.p10_chance_of_playing_next_round = user['players'][9]['chance_of_playing_next_round']
    team.p10_chance_of_playing_this_round = user['players'][9]['chance_of_playing_this_round']
    team.p10_code = user['players'][9]['code']
    team.p10_cost_change_event = user['players'][9]['cost_change_event']
    team.p10_cost_change_event_fall = user['players'][9]['cost_change_event_fall']
    team.p10_cost_change_start = user['players'][9]['cost_change_start']
    team.p10_cost_change_start_fall = user['players'][9]['cost_change_start_fall']
    team.p10_dreamteam_count = user['players'][9]['dreamteam_count']
    team.p10_element_type = user['players'][9]['element_type']
    team.p10_ep_next = user['players'][9]['ep_next']
    team.p10_ep_this = user['players'][9]['ep_this']
    team.p10_event_points = user['players'][9]['event_points']
    team.p10_first_name = user['players'][9]['first_name']
    team.p10_form = user['players'][9]['form']
    team.p10_player_id = user['players'][9]['id']
    team.p10_in_dreamteam = user['players'][9]['in_dreamteam']
    team.p10_news = user['players'][9]['news']
    team.p10_news_added = user['players'][9]['news_added']
    team.p10_now_cost = user['players'][9]['now_cost']
    team.p10_photo = user['players'][9]['photo']
    team.p10_points_per_game = user['players'][9]['points_per_game']
    team.p10_second_name = user['players'][9]['second_name']
    team.p10_selected_by_percent = user['players'][9]['selected_by_percent']
    team.p10_special = user['players'][9]['special']
    team.p10_squad_number = user['players'][9]['squad_number']
    team.p10_status = user['players'][9]['status']
    team.p10_team = user['players'][9]['team']
    team.p10_team_code = user['players'][9]['team_code']
    team.p10_total_points = user['players'][9]['total_points']
    team.p10_transfers_in = user['players'][9]['transfers_in']
    team.p10_transfers_in_event = user['players'][9]['transfers_in_event']
    team.p10_transfers_out = user['players'][9]['transfers_out']
    team.p10_transfers_out_event = user['players'][9]['transfers_out_event']
    team.p10_value_form = user['players'][9]['value_form']
    team.p10_value_season = user['players'][9]['value_season']
    team.p10_web_name = user['players'][9]['web_name']
    team.p10_minutes = user['players'][9]['minutes']
    team.p10_goals_scored = user['players'][9]['goals_scored']
    team.p10_assists = user['players'][9]['assists']
    team.p10_clean_sheets = user['players'][9]['clean_sheets']
    team.p10_own_goals = user['players'][9]['own_goals']
    team.p10_penalties_saved = user['players'][9]['penalties_saved']
    team.p10_yellow_cards = user['players'][9]['yellow_cards']
    team.p10_red_cards = user['players'][9]['red_cards']
    team.p10_saves = user['players'][9]['saves']
    team.p10_bonus = user['players'][9]['bonus']
    team.p10_bps = user['players'][9]['bps']
    team.p10_influence = user['players'][9]['influence']
    team.p10_creativity = user['players'][9]['creativity']
    team.p10_threat = user['players'][9]['threat']
    team.p10_ict_index = user['players'][9]['ict_index']
    team.p10_influence_rank = user['players'][9]['influence_rank']
    team.p10_influence_rank_type = user['players'][9]['influence_rank_type']
    team.p10_creativity_rank = user['players'][9]['creativity_rank']
    team.p10_creativity_rank_type = user['players'][9]['creativity_rank_type']
    team.p10_threat_rank = user['players'][9]['threat_rank']
    team.p10_threat_rank_type = user['players'][9]['threat_rank_type']

    # player 11
    team.p11_chance_of_playing_next_round = user['players'][10]['chance_of_playing_next_round']
    team.p11_chance_of_playing_this_round = user['players'][10]['chance_of_playing_this_round']
    team.p11_code = user['players'][10]['code']
    team.p11_cost_change_event = user['players'][10]['cost_change_event']
    team.p11_cost_change_event_fall = user['players'][10]['cost_change_event_fall']
    team.p11_cost_change_start = user['players'][10]['cost_change_start']
    team.p1_cost_change_start_fall = user['players'][10]['cost_change_start_fall']
    team.p11_dreamteam_count = user['players'][10]['dreamteam_count']
    team.p11_element_type = user['players'][10]['element_type']
    team.p11_ep_next = user['players'][10]['ep_next']
    team.p11_ep_this = user['players'][10]['ep_this']
    team.p1_event_points = user['players'][10]['event_points']
    team.p11_first_name = user['players'][10]['first_name']
    team.p11_form = user['players'][10]['form']
    team.p11_player_id = user['players'][10]['id']
    team.p11_in_dreamteam = user['players'][10]['in_dreamteam']
    team.p11_news = user['players'][10]['news']
    team.p11_news_added = user['players'][10]['news_added']
    team.p11_now_cost = user['players'][10]['now_cost']
    team.p11_photo = user['players'][10]['photo']
    team.p11_points_per_game = user['players'][10]['points_per_game']
    team.p11_second_name = user['players'][10]['second_name']
    team.p11_selected_by_percent = user['players'][10]['selected_by_percent']
    team.p11_special = user['players'][10]['special']
    team.p11_squad_number = user['players'][10]['squad_number']
    team.p11_status = user['players'][10]['status']
    team.p11_team = user['players'][10]['team']
    team.p11_team_code = user['players'][10]['team_code']
    team.p11_total_points = user['players'][10]['total_points']
    team.p11_transfers_in = user['players'][10]['transfers_in']
    team.p11_transfers_in_event = user['players'][10]['transfers_in_event']
    team.p11_transfers_out = user['players'][10]['transfers_out']
    team.p11_transfers_out_event = user['players'][10]['transfers_out_event']
    team.p11_value_form = user['players'][10]['value_form']
    team.p11_value_season = user['players'][10]['value_season']
    team.p11_web_name = user['players'][10]['web_name']
    team.p11_minutes = user['players'][10]['minutes']
    team.p11_goals_scored = user['players'][10]['goals_scored']
    team.p11_assists = user['players'][10]['assists']
    team.p11_clean_sheets = user['players'][10]['clean_sheets']
    team.p11_own_goals = user['players'][10]['own_goals']
    team.p11_penalties_saved = user['players'][10]['penalties_saved']
    team.p11_yellow_cards = user['players'][10]['yellow_cards']
    team.p11_red_cards = user['players'][10]['red_cards']
    team.p11_saves = user['players'][10]['saves']
    team.p11_bonus = user['players'][10]['bonus']
    team.p11_bps = user['players'][10]['bps']
    team.p11_influence = user['players'][10]['influence']
    team.p11_creativity = user['players'][10]['creativity']
    team.p11_threat = user['players'][10]['threat']
    team.p11_ict_index = user['players'][10]['ict_index']
    team.p11_influence_rank = user['players'][10]['influence_rank']
    team.p11_influence_rank_type = user['players'][10]['influence_rank_type']
    team.p11_creativity_rank = user['players'][10]['creativity_rank']
    team.p11_creativity_rank_type = user['players'][10]['creativity_rank_type']
    team.p11_threat_rank = user['players'][10]['threat_rank']
    team.p11_threat_rank_type = user['players'][10]['threat_rank_type']

    # player 12
    team.p12_chance_of_playing_next_round = user['players'][11]['chance_of_playing_next_round']
    team.p12_chance_of_playing_this_round = user['players'][11]['chance_of_playing_this_round']
    team.p12_code = user['players'][11]['code']
    team.p12_cost_change_event = user['players'][11]['cost_change_event']
    team.p12_cost_change_event_fall = user['players'][11]['cost_change_event_fall']
    team.p12_cost_change_start = user['players'][11]['cost_change_start']
    team.p12_cost_change_start_fall = user['players'][11]['cost_change_start_fall']
    team.p12_dreamteam_count = user['players'][11]['dreamteam_count']
    team.p12_element_type = user['players'][11]['element_type']
    team.p12_ep_next = user['players'][11]['ep_next']
    team.p12_ep_this = user['players'][11]['ep_this']
    team.p12_event_points = user['players'][11]['event_points']
    team.p12_first_name = user['players'][11]['first_name']
    team.p12_form = user['players'][11]['form']
    team.p12_player_id = user['players'][11]['id']
    team.p12_in_dreamteam = user['players'][11]['in_dreamteam']
    team.p12_news = user['players'][11]['news']
    team.p12_news_added = user['players'][11]['news_added']
    team.p12_now_cost = user['players'][11]['now_cost']
    team.p12_photo = user['players'][11]['photo']
    team.p12_points_per_game = user['players'][11]['points_per_game']
    team.p12_second_name = user['players'][11]['second_name']
    team.p12_selected_by_percent = user['players'][11]['selected_by_percent']
    team.p12_special = user['players'][11]['special']
    team.p12_squad_number = user['players'][11]['squad_number']
    team.p12_status = user['players'][11]['status']
    team.p12_team = user['players'][11]['team']
    team.p12_team_code = user['players'][11]['team_code']
    team.p12_total_points = user['players'][11]['total_points']
    team.p12_transfers_in = user['players'][11]['transfers_in']
    team.p12_transfers_in_event = user['players'][11]['transfers_in_event']
    team.p12_transfers_out = user['players'][11]['transfers_out']
    team.p12_transfers_out_event = user['players'][11]['transfers_out_event']
    team.p12_value_form = user['players'][11]['value_form']
    team.p12_value_season = user['players'][11]['value_season']
    team.p12_web_name = user['players'][11]['web_name']
    team.p12_minutes = user['players'][11]['minutes']
    team.p12_goals_scored = user['players'][11]['goals_scored']
    team.p12_assists = user['players'][11]['assists']
    team.p12_clean_sheets = user['players'][11]['clean_sheets']
    team.p12_own_goals = user['players'][11]['own_goals']
    team.p12_penalties_saved = user['players'][11]['penalties_saved']
    team.p12_yellow_cards = user['players'][11]['yellow_cards']
    team.p12_red_cards = user['players'][11]['red_cards']
    team.p12_saves = user['players'][11]['saves']
    team.p12_bonus = user['players'][11]['bonus']
    team.p12_bps = user['players'][11]['bps']
    team.p12_influence = user['players'][11]['influence']
    team.p12_creativity = user['players'][11]['creativity']
    team.p12_threat = user['players'][11]['threat']
    team.p12_ict_index = user['players'][11]['ict_index']
    team.p12_influence_rank = user['players'][11]['influence_rank']
    team.p12_influence_rank_type = user['players'][11]['influence_rank_type']
    team.p12_creativity_rank = user['players'][11]['creativity_rank']
    team.p12_creativity_rank_type = user['players'][11]['creativity_rank_type']
    team.p12_threat_rank = user['players'][11]['threat_rank']
    team.p12_threat_rank_type = user['players'][11]['threat_rank_type']

    # player 13
    team.p13_chance_of_playing_next_round = user['players'][12]['chance_of_playing_next_round']
    team.p13_chance_of_playing_this_round = user['players'][12]['chance_of_playing_this_round']
    team.p13_code = user['players'][12]['code']
    team.p13_cost_change_event = user['players'][12]['cost_change_event']
    team.p13_cost_change_event_fall = user['players'][12]['cost_change_event_fall']
    team.p13_cost_change_start = user['players'][12]['cost_change_start']
    team.p13_cost_change_start_fall = user['players'][12]['cost_change_start_fall']
    team.p13_dreamteam_count = user['players'][12]['dreamteam_count']
    team.p13_element_type = user['players'][12]['element_type']
    team.p13_ep_next = user['players'][12]['ep_next']
    team.p13_ep_this = user['players'][12]['ep_this']
    team.p13_event_points = user['players'][12]['event_points']
    team.p13_first_name = user['players'][12]['first_name']
    team.p13_form = user['players'][12]['form']
    team.p13_player_id = user['players'][12]['id']
    team.p13_in_dreamteam = user['players'][12]['in_dreamteam']
    team.p13_news = user['players'][12]['news']
    team.p13_news_added = user['players'][12]['news_added']
    team.p13_now_cost = user['players'][12]['now_cost']
    team.p13_photo = user['players'][12]['photo']
    team.p13_points_per_game = user['players'][12]['points_per_game']
    team.p13_second_name = user['players'][12]['second_name']
    team.p13_selected_by_percent = user['players'][12]['selected_by_percent']
    team.p13_special = user['players'][12]['special']
    team.p13_squad_number = user['players'][12]['squad_number']
    team.p13_status = user['players'][12]['status']
    team.p13_team = user['players'][12]['team']
    team.p13_team_code = user['players'][12]['team_code']
    team.p13_total_points = user['players'][12]['total_points']
    team.p13_transfers_in = user['players'][12]['transfers_in']
    team.p13_transfers_in_event = user['players'][12]['transfers_in_event']
    team.p13_transfers_out = user['players'][12]['transfers_out']
    team.p13_transfers_out_event = user['players'][12]['transfers_out_event']
    team.p13_value_form = user['players'][12]['value_form']
    team.p13_value_season = user['players'][12]['value_season']
    team.p13_web_name = user['players'][12]['web_name']
    team.p13_minutes = user['players'][12]['minutes']
    team.p13_goals_scored = user['players'][12]['goals_scored']
    team.p13_assists = user['players'][12]['assists']
    team.p13_clean_sheets = user['players'][12]['clean_sheets']
    team.p13_own_goals = user['players'][12]['own_goals']
    team.p13_penalties_saved = user['players'][12]['penalties_saved']
    team.p13_yellow_cards = user['players'][12]['yellow_cards']
    team.p13_red_cards = user['players'][12]['red_cards']
    team.p13_saves = user['players'][12]['saves']
    team.p13_bonus = user['players'][12]['bonus']
    team.p13_bps = user['players'][12]['bps']
    team.p13_influence = user['players'][12]['influence']
    team.p13_creativity = user['players'][12]['creativity']
    team.p13_threat = user['players'][12]['threat']
    team.p13_ict_index = user['players'][12]['ict_index']
    team.p13_influence_rank = user['players'][12]['influence_rank']
    team.p13_influence_rank_type = user['players'][12]['influence_rank_type']
    team.p13_creativity_rank = user['players'][12]['creativity_rank']
    team.p13_creativity_rank_type = user['players'][12]['creativity_rank_type']
    team.p13_threat_rank = user['players'][12]['threat_rank']
    team.p13_threat_rank_type = user['players'][12]['threat_rank_type']

    # player 14
    team.p14_chance_of_playing_next_round = user['players'][13]['chance_of_playing_next_round']
    team.p14_chance_of_playing_this_round = user['players'][13]['chance_of_playing_this_round']
    team.p14_code = user['players'][13]['code']
    team.p14_cost_change_event = user['players'][13]['cost_change_event']
    team.p14_cost_change_event_fall = user['players'][13]['cost_change_event_fall']
    team.p14_cost_change_start = user['players'][13]['cost_change_start']
    team.p14_cost_change_start_fall = user['players'][13]['cost_change_start_fall']
    team.p14_dreamteam_count = user['players'][13]['dreamteam_count']
    team.p14_element_type = user['players'][13]['element_type']
    team.p14_ep_next = user['players'][13]['ep_next']
    team.p14_ep_this = user['players'][13]['ep_this']
    team.p14_event_points = user['players'][13]['event_points']
    team.p14_first_name = user['players'][13]['first_name']
    team.p14_form = user['players'][13]['form']
    team.p14_player_id = user['players'][13]['id']
    team.p14_in_dreamteam = user['players'][13]['in_dreamteam']
    team.p14_news = user['players'][13]['news']
    team.p14_news_added = user['players'][13]['news_added']
    team.p14_now_cost = user['players'][13]['now_cost']
    team.p14_photo = user['players'][13]['photo']
    team.p14_points_per_game = user['players'][13]['points_per_game']
    team.p14_second_name = user['players'][13]['second_name']
    team.p14_selected_by_percent = user['players'][13]['selected_by_percent']
    team.p14_special = user['players'][13]['special']
    team.p14_squad_number = user['players'][13]['squad_number']
    team.p14_status = user['players'][13]['status']
    team.p14_team = user['players'][13]['team']
    team.p14_team_code = user['players'][13]['team_code']
    team.p14_total_points = user['players'][13]['total_points']
    team.p14_transfers_in = user['players'][13]['transfers_in']
    team.p14_transfers_in_event = user['players'][13]['transfers_in_event']
    team.p14_transfers_out = user['players'][13]['transfers_out']
    team.p14_transfers_out_event = user['players'][13]['transfers_out_event']
    team.p14_value_form = user['players'][13]['value_form']
    team.p14_value_season = user['players'][13]['value_season']
    team.p14_web_name = user['players'][13]['web_name']
    team.p14_minutes = user['players'][13]['minutes']
    team.p14_goals_scored = user['players'][13]['goals_scored']
    team.p14_assists = user['players'][13]['assists']
    team.p14_clean_sheets = user['players'][13]['clean_sheets']
    team.p14_own_goals = user['players'][13]['own_goals']
    team.p14_penalties_saved = user['players'][13]['penalties_saved']
    team.p14_yellow_cards = user['players'][13]['yellow_cards']
    team.p14_red_cards = user['players'][13]['red_cards']
    team.p14_saves = user['players'][13]['saves']
    team.p14_bonus = user['players'][13]['bonus']
    team.p14_bps = user['players'][13]['bps']
    team.p14_influence = user['players'][13]['influence']
    team.p14_creativity = user['players'][13]['creativity']
    team.p14_threat = user['players'][13]['threat']
    team.p14_ict_index = user['players'][13]['ict_index']
    team.p14_influence_rank = user['players'][13]['influence_rank']
    team.p14_influence_rank_type = user['players'][13]['influence_rank_type']
    team.p14_creativity_rank = user['players'][13]['creativity_rank']
    team.p14_creativity_rank_type = user['players'][13]['creativity_rank_type']
    team.p14_threat_rank = user['players'][13]['threat_rank']
    team.p14_threat_rank_type = user['players'][13]['threat_rank_type']

    # player 15
    team.p15_chance_of_playing_next_round = user['players'][14]['chance_of_playing_next_round']
    team.p15_chance_of_playing_this_round = user['players'][14]['chance_of_playing_this_round']
    team.p15_code = user['players'][14]['code']
    team.p15_cost_change_event = user['players'][14]['cost_change_event']
    team.p15_cost_change_event_fall = user['players'][14]['cost_change_event_fall']
    team.p15_cost_change_start = user['players'][14]['cost_change_start']
    team.p15_cost_change_start_fall = user['players'][14]['cost_change_start_fall']
    team.p15_dreamteam_count = user['players'][14]['dreamteam_count']
    team.p15_element_type = user['players'][14]['element_type']
    team.p15_ep_next = user['players'][14]['ep_next']
    team.p15_ep_this = user['players'][14]['ep_this']
    team.p15_event_points = user['players'][14]['event_points']
    team.p15_first_name = user['players'][14]['first_name']
    team.p15_form = user['players'][14]['form']
    team.p15_player_id = user['players'][14]['id']
    team.p15_in_dreamteam = user['players'][14]['in_dreamteam']
    team.p15_news = user['players'][14]['news']
    team.p15_news_added = user['players'][14]['news_added']
    team.p15_now_cost = user['players'][14]['now_cost']
    team.p15_photo = user['players'][14]['photo']
    team.p15_points_per_game = user['players'][14]['points_per_game']
    team.p15_second_name = user['players'][14]['second_name']
    team.p15_selected_by_percent = user['players'][14]['selected_by_percent']
    team.p15_special = user['players'][14]['special']
    team.p15_squad_number = user['players'][14]['squad_number']
    team.p15_status = user['players'][14]['status']
    team.p15_team = user['players'][14]['team']
    team.p15_team_code = user['players'][14]['team_code']
    team.p15_total_points = user['players'][14]['total_points']
    team.p15_transfers_in = user['players'][14]['transfers_in']
    team.p15_transfers_in_event = user['players'][14]['transfers_in_event']
    team.p15_transfers_out = user['players'][14]['transfers_out']
    team.p15_transfers_out_event = user['players'][14]['transfers_out_event']
    team.p15_value_form = user['players'][14]['value_form']
    team.p15_value_season = user['players'][14]['value_season']
    team.p15_web_name = user['players'][14]['web_name']
    team.p15_minutes = user['players'][14]['minutes']
    team.p15_goals_scored = user['players'][14]['goals_scored']
    team.p15_assists = user['players'][14]['assists']
    team.p15_clean_sheets = user['players'][14]['clean_sheets']
    team.p15_own_goals = user['players'][14]['own_goals']
    team.p15_penalties_saved = user['players'][14]['penalties_saved']
    team.p15_yellow_cards = user['players'][14]['yellow_cards']
    team.p15_red_cards = user['players'][14]['red_cards']
    team.p15_saves = user['players'][14]['saves']
    team.p15_bonus = user['players'][14]['bonus']
    team.p15_bps = user['players'][14]['bps']
    team.p15_influence = user['players'][14]['influence']
    team.p15_creativity = user['players'][14]['creativity']
    team.p15_threat = user['players'][14]['threat']
    team.p15_ict_index = user['players'][14]['ict_index']
    team.p15_influence_rank = user['players'][14]['influence_rank']
    team.p15_influence_rank_type = user['players'][14]['influence_rank_type']
    team.p15_creativity_rank = user['players'][14]['creativity_rank']
    team.p15_creativity_rank_type = user['players'][14]['creativity_rank_type']
    team.p15_threat_rank = user['players'][14]['threat_rank']
    team.p15_threat_rank_type = user['players'][14]['threat_rank_type']

    db.session.commit()
    session['user_id'] = user_id
    return redirect(f'/user/{user_id}')



# user route ###################################################################
# user data
@app.route('/user/<int:user_id>')
def user_route(user_id):
    player = Team.query.get_or_404(user_id)
    jerseys = jersey_list
    return render_template('user.html', player=player, jerseys=jerseys)



# logging out ##################################################################
# logout
@app.route('/logout')
def logout():
    session.pop('user_id')
    return redirect('/')

# delete user
@app.route('/user/delete/<int:user_id>', methods=["GET","POST"])
def delete_user(user_id):
    user = Users.query.get_or_404(user_id)
    db.session.delete(user)
    db.session.commit()
    return redirect('/')



# site feature routes ##########################################################

# team anaylsis
@app.route('/team/analysis')
def team_analysis_route():
    return redirect('/')

# league table
@app.route('/league/table/<int:classic_league_id>')
def league_table_route(classic_league_id):
    if classic_league_id == classic_league_id:
        classic_league = classic_league_standings(classic_league_id)
    else:
        classic_league = ''
    return render_template('league_table.html', classic_league=classic_league)

# league awards
@app.route('/league/awards/<int:classic_league_id>')
def league_awards_route(classic_league_id):
    classic_league = classic_league_standings(classic_league_id)
    return render_template('league_awards.html', classic_league=classic_league)

# league chat
@app.route('/league/chat/<int:user_id>', methods=['GET', "POST"])
def league_chat_route(user_id):
    player = Team.query.get_or_404(user_id)
    league_id = player.classic_league_id
    league_chat = Chat.query.all()
    date = datetime.datetime.now().strftime('%Y/%m/%d %H:%M:%S')
    #date = now.strftime('%b %d, %I:%M%p')
    jersey = jersey_list
    form = ChatForm()
    if form.validate_on_submit():
        text = form.text.data
        new_chat = Chat(text=text, date=date, user_id=session["user_id"], league_id=league_id)
        db.session.add(new_chat)
        db.session.commit()
        return redirect(f'/league/chat/{player.id}')
    return render_template('/chat.html', player=player, form=form, league_chat=league_chat, jersey=jersey)

# link to fpl scout
@app.route('/the_scout')
def the_scout_route():
    return redirect('https://www.premierleague.com/news/2178603')
